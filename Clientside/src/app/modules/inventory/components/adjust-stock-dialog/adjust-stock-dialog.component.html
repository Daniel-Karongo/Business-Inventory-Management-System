<h2 mat-dialog-title class="dialog-title">Adjust Stock</h2>

<mat-dialog-content [formGroup]="form" class="dialog-body">

  <!-- Context -->
  <div class="context-card">
    <div class="product">{{ data.productName }}</div>
    <div class="meta">
      {{ data.classification }} â€¢ {{ data.branchName }}
    </div>
  </div>

  <div class="grid-2">

    <mat-form-field appearance="fill">
      <mat-label>Quantity Delta</mat-label>
      <input matInput type="number" formControlName="quantityDelta">
      <mat-hint>Use positive or negative values</mat-hint>
    </mat-form-field>

    <mat-form-field appearance="fill" *ngIf="form.value.quantityDelta > 0">
      <mat-label>Unit Cost (for new batch)</mat-label>
      <input matInput type="number" formControlName="unitCost">
      <mat-hint>
        Required when adding stock (creates new cost layer)
      </mat-hint>
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>Reason</mat-label>
      <input matInput formControlName="reason">
    </mat-form-field>

  </div>

  <mat-form-field appearance="fill">
    <mat-label>Reference</mat-label>
    <input matInput formControlName="reference">
  </mat-form-field>

</mat-dialog-content>

<mat-dialog-actions align="end" class="dialog-footer">
  <button mat-button (click)="close()">Cancel</button>
  <button mat-flat-button color="warn" [disabled]="loading || form.invalid" (click)="submit()">
    Adjust Stock
  </button>
</mat-dialog-actions>