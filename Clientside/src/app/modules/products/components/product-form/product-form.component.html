<form [formGroup]="form" class="form-container">

  <mat-tab-group>

    <!-- ========================= -->
    <!-- BASICS TAB -->
    <!-- ========================= -->
    <mat-tab label="Basics">
      <div class="section">

        <mat-form-field appearance="fill" class="w-full">
          <mat-label>Name</mat-label>
          <input matInput formControlName="name" />
        </mat-form-field>

        <mat-form-field appearance="fill" class="w-full">
          <mat-label>Description</mat-label>
          <textarea matInput formControlName="description"></textarea>
        </mat-form-field>

        <mat-form-field appearance="fill" class="w-full">
          <mat-label>Minimum % Profit</mat-label>
          <input
            matInput
            type="number"
            formControlName="minimumPercentageProfit"
          />
        </mat-form-field>

      </div>
    </mat-tab>

    <!-- ========================= -->
    <!-- VARIANTS TAB -->
    <!-- ========================= -->
    <mat-tab label="Variants">
      <div class="section">

        <div formArrayName="variants">

          <div
            *ngFor="let v of variantGroups; let i = index"
            [formGroupName]="i"
            class="variant-row"
          >

            <mat-form-field appearance="fill">
              <mat-label>Classification</mat-label>
              <input matInput formControlName="classification" />
            </mat-form-field>

            <mat-form-field appearance="fill">
              <mat-label>Barcode (optional)</mat-label>
              <input matInput formControlName="barcode" />
            </mat-form-field>

            <button
              mat-stroked-button
              color="warn"
              type="button"
              (click)="removeVariant(i)"
            >
              Remove
            </button>

          </div>

        </div>

        <button
          mat-stroked-button
          type="button"
          (click)="addVariant()"
        >
          + Add Variant
        </button>

      </div>
    </mat-tab>

    <!-- ========================= -->
    <!-- FILES TAB -->
    <!-- ========================= -->
    <mat-tab label="Files">
      <div class="section">

        <input type="file" multiple (change)="addFiles($event)" />

        <div *ngFor="let f of files; let i = index" class="file-card">
          <span class="file-name">{{ f.file.name }}</span>

          <button
            mat-icon-button
            color="warn"
            type="button"
            (click)="removeFile(i)"
          >
            <mat-icon>delete</mat-icon>
          </button>
        </div>

      </div>
    </mat-tab>

  </mat-tab-group>

  <!-- ========================= -->
  <!-- ACTIONS -->
  <!-- ========================= -->
  <div class="form-actions">
    <button mat-button type="button" (click)="cancel.emit()">
      Cancel
    </button>

    <button
      mat-flat-button
      color="primary"
      type="button"
      (click)="save()"
      [disabled]="form.invalid"
    >
      Create Product
    </button>
  </div>

</form>