<div class="page-container p-4">

  <!-- HEADER -->
  <div class="page-header mb-6">
    <div>
      <h2 class="text-xl font-semibold">
        Ledger — {{ account?.code }} {{ account?.name }}
      </h2>
      <div class="text-sm text-[var(--text-secondary)]">
        {{ account?.type }}
      </div>
    </div>

    <button mat-stroked-button (click)="back()">
      Back
    </button>
  </div>

  <!-- LOADING -->
  <div *ngIf="loading" class="py-8 text-center text-gray-400">
    Loading ledger…
  </div>

  <!-- TABLE -->
  <div class="table-wrapper" *ngIf="!loading">

    <mat-table
      [dataSource]="rows"
      class="mat-elevation-z1 rounded bg-[var(--surface)]">

      <!-- DATE -->
      <ng-container matColumnDef="date">
        <mat-header-cell *matHeaderCellDef>Date</mat-header-cell>
        <mat-cell *matCellDef="let r">
          {{ r.postedAt | date:'medium' }}
        </mat-cell>
      </ng-container>

      <!-- REFERENCE -->
      <ng-container matColumnDef="reference">
        <mat-header-cell *matHeaderCellDef>Reference</mat-header-cell>
        <mat-cell *matCellDef="let r">
          {{ r.journalReference || '—' }}
        </mat-cell>
      </ng-container>

      <!-- DIRECTION -->
      <ng-container matColumnDef="direction">
        <mat-header-cell *matHeaderCellDef>Type</mat-header-cell>
        <mat-cell *matCellDef="let r">
          <span
            [ngClass]="{
              'text-green-500': r.direction === 'DEBIT',
              'text-red-500': r.direction === 'CREDIT'
            }">
            {{ r.direction === 'DEBIT' ? 'In' : 'Out' }}
          </span>
        </mat-cell>
      </ng-container>

      <!-- AMOUNT -->
      <ng-container matColumnDef="amount">
        <mat-header-cell *matHeaderCellDef>Amount</mat-header-cell>
        <mat-cell *matCellDef="let r">
          {{ r.amount | number:'1.2-2' }}
        </mat-cell>
      </ng-container>

      <!-- BALANCE -->
      <ng-container matColumnDef="balance">
        <mat-header-cell *matHeaderCellDef>Balance</mat-header-cell>
        <mat-cell *matCellDef="let r">
          {{ r.runningBalance | number:'1.2-2' }}
        </mat-cell>
      </ng-container>

      <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
      <mat-row *matRowDef="let row; columns: displayedColumns"></mat-row>

    </mat-table>
  </div>

</div>