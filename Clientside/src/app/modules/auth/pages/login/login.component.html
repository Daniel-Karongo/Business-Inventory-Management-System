<div class="auth-root">
  <div class="auth-card" [formGroup]="form">

    <!-- HEADER -->
    <header class="dialog-header">
      <div class="logo">
        <span>BM</span>
      </div>

      <div class="dialog-title">Business Manager</div>
      <div class="dialog-subtitle">
        Log in to your account
      </div>
    </header>

    <!-- CONTENT -->
    <section class="form-section">
      <div class="form-grid">

        <mat-form-field appearance="fill">
          <mat-label>Username</mat-label>
          <input matInput formControlName="identifier" autocomplete="username" />
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Password</mat-label>
          <input matInput [type]="hide ? 'password' : 'text'" formControlName="password"
            autocomplete="current-password" />
          <button mat-icon-button matSuffix type="button" (click)="hide = !hide">
            <mat-icon>
              {{ hide ? 'visibility' : 'visibility_off' }}
            </mat-icon>
          </button>
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Branch</mat-label>
          <mat-select formControlName="branchId">
            <mat-option *ngFor="let b of branches" [value]="b.id">
              {{ b.name }}
            </mat-option>
          </mat-select>
        </mat-form-field>

      </div>

      <div class="forgot-row">
        <button mat-button type="button" (click)="onForgot()">
          Forgot password?
        </button>
      </div>
    </section>

    <!-- FOOTER -->
    <footer class="dialog-footer">

      <button mat-flat-button color="primary" class="primary-action" [disabled]="loading || form.invalid"
        (click)="onSubmit()">

        <ng-container *ngIf="!loading">Sign in</ng-container>

        <ng-container *ngIf="loading">
          <mat-progress-spinner diameter="20" strokeWidth="3" mode="indeterminate">
          </mat-progress-spinner>
        </ng-container>

      </button>

    </footer>

    <div class="footer-note">
      Â© {{ currentYear }} Integrity Technologies
    </div>

  </div>
</div>