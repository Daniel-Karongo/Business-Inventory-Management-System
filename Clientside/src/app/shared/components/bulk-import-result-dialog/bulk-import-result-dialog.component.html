<h2 mat-dialog-title class="title">
  {{ data.title }}
  <span *ngIf="data.dryRun" class="badge">DRY RUN</span>
</h2>

<mat-dialog-content class="content">

  <!-- SUMMARY -->
  <div class="summary">
    <span>Total: {{ data.result.total }}</span>
    <span class="success">Success: {{ data.result.success }}</span>
    <span class="failed">Failed: {{ data.result.failed }}</span>
  </div>

  <mat-tab-group>

    <!-- ================= SUCCESS ================= -->
    <mat-tab label="Successful">

      <div class="table-wrapper">

        <table mat-table [dataSource]="successDS">

          <ng-container
            *ngFor="let col of data.columns"
            [matColumnDef]="col.key">

            <th mat-header-cell *matHeaderCellDef>
              {{ col.label }}
            </th>

            <td mat-cell *matCellDef="let row">
              {{ value(row, col.key) }}
            </td>

          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>

        </table>

        <mat-paginator
          #successPaginator
          [pageSize]="10"
          [pageSizeOptions]="[5, 10, 25, 50]"
          showFirstLastButtons>
        </mat-paginator>

      </div>

    </mat-tab>

    <!-- ================= FAILED ================= -->
    <mat-tab label="Failed">

      <div class="table-wrapper">

        <table mat-table [dataSource]="failedDS">

          <ng-container matColumnDef="row">
            <th mat-header-cell *matHeaderCellDef>Row</th>
            <td mat-cell *matCellDef="let e">{{ e.row }}</td>
          </ng-container>

          <ng-container matColumnDef="message">
            <th mat-header-cell *matHeaderCellDef>Error</th>
            <td mat-cell *matCellDef="let e">{{ e.message }}</td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="['row','message']"></tr>
          <tr mat-row *matRowDef="let row; columns: ['row','message']"></tr>

        </table>

        <mat-paginator
          #failedPaginator
          [pageSize]="10"
          [pageSizeOptions]="[5, 10, 25, 50]"
          showFirstLastButtons>
        </mat-paginator>

      </div>

    </mat-tab>

  </mat-tab-group>

</mat-dialog-content>

<mat-dialog-actions align="end">

  <button mat-button (click)="close()">
    {{ data.closeLabel || 'Close' }}
  </button>

  <button
    *ngIf="data.dryRun && data.result.failed === 0"
    mat-flat-button
    color="primary"
    (click)="confirm()">
    {{ data.confirmLabel || 'Confirm Import' }}
  </button>

</mat-dialog-actions>