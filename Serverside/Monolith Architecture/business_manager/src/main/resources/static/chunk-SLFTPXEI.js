import{a as A}from"./chunk-L7SXC5JW.js";import{a as nt,b as Ce,c as ve}from"./chunk-WVN3VHDB.js";import{a as re,b as le,c as me,d as ce,e as se,f as de,g as pe,h as ue,i as fe,j as _e,k as ge}from"./chunk-I3US72OE.js";import{a as We,b as Ze}from"./chunk-YVNRBVUQ.js";import{c as et,h as tt}from"./chunk-MA6ZSKR6.js";import"./chunk-MS4AQ6UA.js";import{a as ye,b as we}from"./chunk-2JRABG3A.js";import{d as Ee}from"./chunk-T2UYCDC2.js";import"./chunk-PZ352SLY.js";import{b as J,c as O}from"./chunk-TLF4YXFY.js";import{a as Z,b as ee}from"./chunk-SNZ3II6O.js";import{c as oe,d as ae}from"./chunk-CZGJLEOY.js";import{b as te,h as ne,i as ie}from"./chunk-J5IGF7DT.js";import"./chunk-SGYCFQGT.js";import{d as G,f as S,h as q,i as z,m as U,n as Qe,p as Y,q as Xe,r as Ke,s as Q,v as X,x as K}from"./chunk-D2WFNIGL.js";import"./chunk-AYMLXUSV.js";import{f as W,g as M,h as x}from"./chunk-SRBP6AOE.js";import"./chunk-AQVBCBXZ.js";import{b as $,d as h}from"./chunk-CSKLPVDL.js";import"./chunk-Z7QKINIM.js";import{a as D}from"./chunk-5DTMLZHP.js";import{$c as v,Bb as Ge,Ib as i,J as He,Jb as n,Kb as u,Lb as _,Mb as g,Ob as w,Qb as d,Qc as Ue,Rb as b,Rc as L,Sc as Me,Uc as Ye,Wc as H,Yc as Se,_ as xe,ac as a,bb as l,bc as j,cc as f,da as be,dc as k,gb as m,hd as F,mc as qe,na as E,nb as C,nc as I,oa as y,oc as ze,pc as R,sb as s,yb as $e,zb as c}from"./chunk-KLCDKTJS.js";import"./chunk-FJYW2LMB.js";function st(e,o){e&1&&(i(0,"mat-header-cell"),a(1,"Code"),n())}function dt(e,o){if(e&1&&(i(0,"mat-cell"),a(1),n()),e&2){let t=o.$implicit;l(),j(t.code)}}function pt(e,o){e&1&&(i(0,"mat-header-cell"),a(1,"Name"),n())}function ut(e,o){if(e&1&&(i(0,"mat-cell"),a(1),n()),e&2){let t=o.$implicit;l(),j(t.name)}}function ft(e,o){e&1&&(i(0,"mat-header-cell"),a(1,"Type"),n())}function _t(e,o){if(e&1&&(i(0,"mat-cell"),a(1),n()),e&2){let t=o.$implicit;l(),j(t.type)}}function gt(e,o){e&1&&(i(0,"mat-header-cell"),a(1,"Status"),n())}function Ct(e,o){if(e&1&&(i(0,"mat-cell"),a(1),n()),e&2){let t=o.$implicit;l(),f(" ",t.active?"Active":"Inactive"," ")}}function vt(e,o){e&1&&(i(0,"mat-header-cell"),a(1,"Actions"),n())}function ht(e,o){if(e&1){let t=w();i(0,"mat-cell")(1,"button",14),d("click",function(){let p=E(t).$implicit,P=b();return y(P.edit(p))}),i(2,"mat-icon"),a(3,"edit"),n()()()}}function xt(e,o){e&1&&u(0,"mat-header-row")}function bt(e,o){e&1&&u(0,"mat-row")}var Ie=class e{constructor(o,t){this.accountsService=o;this.router=t}displayedColumns=["code","name","type","status","actions"];accounts=[];ngOnInit(){this.accountsService.list().subscribe(o=>this.accounts=o)}create(){this.router.navigate(["/accounts/chart/create"])}edit(o){this.router.navigate(["/accounts/chart",o.id])}static \u0275fac=function(t){return new(t||e)(m(A),m(h))};static \u0275cmp=C({type:e,selectors:[["ng-component"]],decls:24,vars:3,consts:[[1,"page-container","p-4"],[1,"page-header","flex","justify-between","mb-6"],[1,"text-xl","font-semibold"],["mat-flat-button","","color","primary",3,"click"],[1,"bg-[var(--surface)]","rounded",3,"dataSource"],["matColumnDef","code"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","name"],["matColumnDef","type"],["matColumnDef","status"],["matColumnDef","actions"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["mat-icon-button","",3,"click"]],template:function(t,r){t&1&&(i(0,"div",0)(1,"div",1)(2,"h2",2),a(3,"Chart of Accounts"),n(),i(4,"button",3),d("click",function(){return r.create()}),a(5," Create Account "),n()(),i(6,"mat-table",4),_(7,5),s(8,st,2,0,"mat-header-cell",6)(9,dt,2,1,"mat-cell",7),g(),_(10,8),s(11,pt,2,0,"mat-header-cell",6)(12,ut,2,1,"mat-cell",7),g(),_(13,9),s(14,ft,2,0,"mat-header-cell",6)(15,_t,2,1,"mat-cell",7),g(),_(16,10),s(17,gt,2,0,"mat-header-cell",6)(18,Ct,2,1,"mat-cell",7),g(),_(19,11),s(20,vt,2,0,"mat-header-cell",6)(21,ht,4,0,"mat-cell",7),g(),s(22,xt,1,0,"mat-header-row",12)(23,bt,1,0,"mat-row",13),n()()),t&2&&(l(6),c("dataSource",r.accounts),l(16),c("matHeaderRowDef",r.displayedColumns),l(),c("matRowDefColumns",r.displayedColumns))},dependencies:[v,ge,re,me,pe,ce,le,ue,se,de,fe,_e,x,M,W,O,J],styles:[".page-container[_ngcontent-%COMP%]{max-width:1100px;margin:auto}mat-table[_ngcontent-%COMP%]{width:100%}"]})};function St(e,o){if(e&1&&(i(0,"mat-option",12),a(1),n()),e&2){let t=o.$implicit;c("value",t.value),l(),f(" ",t.label," ")}}var Oe=class e{constructor(o,t,r){this.fb=o;this.accounts=t;this.router=r}types=[{value:"ASSET",label:"Asset"},{value:"LIABILITY",label:"Liability"},{value:"EQUITY",label:"Equity"},{value:"INCOME",label:"Income"},{value:"EXPENSE",label:"Expense"}];form;ngOnInit(){this.form=this.fb.group({code:["",S.required],name:["",S.required],type:["",S.required]})}cancel(){this.router.navigate(["/accounts/chart"])}submit(){this.form.invalid||this.accounts.create(this.form.value).subscribe(()=>this.cancel())}static \u0275fac=function(t){return new(t||e)(m(X),m(A),m(h))};static \u0275cmp=C({type:e,selectors:[["app-account-create"]],decls:29,vars:3,consts:[[1,"page-container","p-4"],[1,"page-header"],[1,"breadcrumb"],[1,"actions"],["mat-stroked-button","",3,"click"],["mat-flat-button","","color","primary",3,"click","disabled"],[1,"form-grid",3,"formGroup"],["appearance","fill"],["matInput","","formControlName","code"],["matInput","","formControlName","name"],["formControlName","type"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,r){t&1&&(i(0,"div",0)(1,"div",1)(2,"div")(3,"h2"),a(4,"Create Account"),n(),i(5,"div",2),a(6,"Accounts / Chart / Create"),n()(),i(7,"div",3)(8,"button",4),d("click",function(){return r.cancel()}),a(9,"Cancel"),n(),i(10,"button",5),d("click",function(){return r.submit()}),a(11," Create "),n()()(),i(12,"mat-card")(13,"h3"),a(14,"Account Details"),n(),i(15,"form",6)(16,"mat-form-field",7)(17,"mat-label"),a(18,"Account Code"),n(),u(19,"input",8),n(),i(20,"mat-form-field",7)(21,"mat-label"),a(22,"Account Name"),n(),u(23,"input",9),n(),i(24,"mat-form-field",7)(25,"mat-label"),a(26,"Account Type"),n(),i(27,"mat-select",10),s(28,St,2,2,"mat-option",11),n()()()()()),t&2&&(l(10),c("disabled",r.form.invalid),l(5),c("formGroup",r.form),l(13),c("ngForOf",r.types))},dependencies:[v,L,K,U,G,q,z,Y,Q,ve,Ce,ie,ne,te,ae,oe,we,ye,Ee,x,M],styles:[".page-container[_ngcontent-%COMP%]{max-width:900px;margin:auto}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:18px}.page-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-weight:600}.page-header[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]{font-size:.85rem;color:var(--text-secondary)}.page-header[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;gap:.5rem}mat-card[_ngcontent-%COMP%]{padding:18px}mat-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:14px;font-weight:600}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:16px}"]})};var Ae=class e{constructor(o){this.http=o}base=D.apiUrl+D.endpoints.manualJournals.base;post(o){return this.http.post(this.base,o)}static \u0275fac=function(t){return new(t||e)(be(F))};static \u0275prov=xe({token:e,factory:e.\u0275fac,providedIn:"root"})};function yt(e,o){if(e&1&&(i(0,"mat-option",27),a(1),n()),e&2){let t=o.$implicit;c("value",t.id),l(),k(" ",t.code," \u2014 ",t.name," ")}}function wt(e,o){if(e&1){let t=w();i(0,"tr",18)(1,"td")(2,"mat-form-field",10)(3,"mat-select",19),s(4,yt,2,3,"mat-option",20),I(5,"async"),n()()(),i(6,"td")(7,"mat-form-field",10)(8,"mat-select",21)(9,"mat-option",22),a(10,"Debit"),n(),i(11,"mat-option",23),a(12,"Credit"),n()()()(),i(13,"td")(14,"mat-form-field",10),u(15,"input",24),n()(),i(16,"td",25)(17,"button",26),d("click",function(){let p=E(t).index,P=b();return y(P.removeLine(p))}),i(18,"mat-icon"),a(19,"delete"),n()()()()}if(e&2){let t=o.index,r=b();c("formGroupName",t),l(4),c("ngForOf",ze(5,2,r.accounts$))}}var Te=class e{constructor(o,t,r,p,P){this.fb=o;this.accountsService=t;this.journalService=r;this.snackbar=p;this.router=P}form;accounts$;posting=!1;ngOnInit(){this.accounts$=this.accountsService.list(),this.form=this.fb.group({reference:["",S.required],description:[""],lines:this.fb.array([])}),this.addLine(),this.addLine()}get lines(){return this.form.get("lines")}addLine(){this.lines.push(this.fb.group({accountId:["",S.required],direction:["DEBIT",S.required],amount:[null,[S.required,S.min(.01)]]}))}removeLine(o){this.lines.removeAt(o)}submit(){this.form.invalid||this.posting||(this.posting=!0,this.journalService.post(this.form.value).subscribe({next:()=>{this.snackbar.open("Journal posted successfully","Close",{duration:2500}),this.router.navigate(["/accounts/journals"])},error:()=>{this.snackbar.open("Failed to post journal","Close",{duration:3e3}),this.posting=!1}}))}cancel(){this.router.navigate(["/accounts/journals"])}static \u0275fac=function(t){return new(t||e)(m(X),m(A),m(Ae),m(Z),m(h))};static \u0275cmp=C({type:e,selectors:[["app-manual-journal"]],decls:40,vars:3,consts:[[1,"page-container","p-4"],[1,"page-header","mb-6"],[1,"text-xl","font-semibold"],[1,"text-sm","text-[var(--text-secondary)]"],[1,"actions"],["mat-stroked-button","",3,"click"],["mat-flat-button","","color","primary",3,"click","disabled"],[1,"bg-[var(--surface)]","rounded","p-4"],[1,"space-y-4",3,"formGroup"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["appearance","fill"],["matInput","","formControlName","reference"],["matInput","","formControlName","description"],[1,"table-wrapper"],[1,"journal-lines"],["formArrayName","lines"],[3,"formGroupName",4,"ngFor","ngForOf"],["mat-stroked-button","","type","button",3,"click"],[3,"formGroupName"],["formControlName","accountId"],[3,"value",4,"ngFor","ngForOf"],["formControlName","direction"],["value","DEBIT"],["value","CREDIT"],["matInput","","type","number","formControlName","amount"],[1,"actions-cell"],["mat-icon-button","","type","button","matTooltip","Remove line",3,"click"],[3,"value"]],template:function(t,r){t&1&&(i(0,"div",0)(1,"div",1)(2,"div")(3,"h2",2),a(4,"New Journal Entry"),n(),i(5,"div",3),a(6," Accounts / Journals / New "),n()(),i(7,"div",4)(8,"button",5),d("click",function(){return r.cancel()}),a(9,"Cancel"),n(),i(10,"button",6),d("click",function(){return r.submit()}),a(11," Post Journal "),n()()(),i(12,"div",7)(13,"form",8)(14,"div",9)(15,"mat-form-field",10)(16,"mat-label"),a(17,"Reference"),n(),u(18,"input",11),n(),i(19,"mat-form-field",10)(20,"mat-label"),a(21,"Description"),n(),u(22,"input",12),n()(),i(23,"div",13)(24,"table",14)(25,"thead")(26,"tr")(27,"th"),a(28,"Account"),n(),i(29,"th"),a(30,"Direction"),n(),i(31,"th"),a(32,"Amount"),n(),u(33,"th"),n()(),i(34,"tbody",15),s(35,wt,20,4,"tr",16),n()()(),i(36,"button",17),d("click",function(){return r.addLine()}),i(37,"mat-icon"),a(38,"add"),n(),a(39," Add Line "),n()()()()),t&2&&(l(10),c("disabled",r.form.invalid||r.posting),l(3),c("formGroup",r.form),l(22),c("ngForOf",r.lines.controls))},dependencies:[v,L,Ye,K,U,G,Qe,q,z,Y,Q,Xe,Ke,ie,ne,te,ae,oe,we,ye,Ee,x,M,W,O,J,ee],styles:[".page-container[_ngcontent-%COMP%]{max-width:1100px;margin:auto}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.page-header[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;gap:8px}.table-wrapper[_ngcontent-%COMP%]{overflow-x:auto}.journal-lines[_ngcontent-%COMP%]{width:100%;border-spacing:0}.journal-lines[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:left;font-weight:600;color:var(--text-secondary);padding:8px 12px;white-space:nowrap}.journal-lines[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:6px 12px;vertical-align:middle}mat-form-field[_ngcontent-%COMP%]{width:100%}.actions-cell[_ngcontent-%COMP%]{width:48px;text-align:center}"]})};var Pe=class e{constructor(o){this.http=o}base=D.apiUrl+"/accounting/journals";list(){return this.http.get(this.base)}get(o){return this.http.get(`${this.base}/${o}`)}reverse(o,t){return this.http.post(`${this.base}/${o}/reverse`,{reason:t})}static \u0275fac=function(t){return new(t||e)(be(F))};static \u0275prov=xe({token:e,factory:e.\u0275fac,providedIn:"root"})};function Dt(e,o){e&1&&(i(0,"mat-header-cell",22),a(1," Reference "),n())}function Ot(e,o){if(e&1&&(i(0,"mat-cell",23),a(1),n()),e&2){let t=o.$implicit;l(),f(" ",t.reference," ")}}function At(e,o){e&1&&(i(0,"mat-header-cell",24),a(1," Description "),n())}function Tt(e,o){if(e&1&&(i(0,"mat-cell",24),a(1),n()),e&2){let t=o.$implicit;l(),f(" ",t.description," ")}}function Pt(e,o){e&1&&(i(0,"mat-header-cell",25),a(1," Source "),n())}function jt(e,o){if(e&1&&(i(0,"mat-cell",25),a(1),n()),e&2){let t=o.$implicit;l(),f(" ",t.sourceModule," ")}}function kt(e,o){e&1&&(i(0,"mat-header-cell",26),a(1," Posted At "),n())}function Rt(e,o){if(e&1&&(i(0,"mat-cell",27),a(1),I(2,"date"),n()),e&2){let t=o.$implicit;l(),f(" ",R(2,1,t.postedAt,"medium")," ")}}function Lt(e,o){e&1&&(i(0,"mat-header-cell",28),a(1," Status "),n())}function Ft(e,o){if(e&1&&(i(0,"mat-cell",28)(1,"span"),a(2),n()()),e&2){let t=o.$implicit;l(),Ge("text-red-400",t.reversed),l(),f(" ",t.reversed?"Reversed":"Posted"," ")}}function Jt(e,o){e&1&&(i(0,"mat-header-cell",29),a(1," Actions "),n())}function Nt(e,o){if(e&1){let t=w();i(0,"mat-cell",29)(1,"button",30),d("click",function(){let p=E(t).$implicit,P=b();return y(P.view(p))}),i(2,"mat-icon"),a(3,"visibility"),n()()()}if(e&2){let t=o.$implicit;l(),$e("aria-label","View journal "+t.reference)}}function Bt(e,o){e&1&&u(0,"mat-header-row")}function Vt(e,o){e&1&&u(0,"mat-row")}var je=class e{constructor(o,t,r){this.journalService=o;this.router=t;this.snackbar=r}displayedColumns=["reference","description","source","postedAt","status","actions"];journals=[];loading=!1;ngOnInit(){this.load()}load(){this.loading=!0,this.journalService.list().pipe(He(()=>this.loading=!1)).subscribe({next:o=>{this.journals=o||[]},error:()=>{this.snackbar.open("Failed to load journals","Close",{duration:3e3})}})}view(o){this.router.navigate(["/accounts/journals",o.id])}static \u0275fac=function(t){return new(t||e)(m(Pe),m(h),m(Z))};static \u0275cmp=C({type:e,selectors:[["app-journal-list"]],decls:22,vars:3,consts:[[1,"table-wrapper"],[1,"mat-elevation-z1","rounded","bg-[var(--surface)]",3,"dataSource"],["matColumnDef","reference"],["class","mat-column-reference sortable",4,"matHeaderCellDef"],["class","mat-column-reference",4,"matCellDef"],["matColumnDef","description"],["class","mat-column-description",4,"matHeaderCellDef"],["class","mat-column-description",4,"matCellDef"],["matColumnDef","source"],["class","mat-column-source",4,"matHeaderCellDef"],["class","mat-column-source",4,"matCellDef"],["matColumnDef","postedAt"],["class","mat-column-postedAt sortable",4,"matHeaderCellDef"],["class","mat-column-postedAt",4,"matCellDef"],["matColumnDef","status"],["class","mat-column-status",4,"matHeaderCellDef"],["class","mat-column-status",4,"matCellDef"],["matColumnDef","actions"],["class","mat-column-actions",4,"matHeaderCellDef"],["class","mat-column-actions",4,"matCellDef"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[1,"mat-column-reference","sortable"],[1,"mat-column-reference"],[1,"mat-column-description"],[1,"mat-column-source"],[1,"mat-column-postedAt","sortable"],[1,"mat-column-postedAt"],[1,"mat-column-status"],[1,"mat-column-actions"],["mat-icon-button","","matTooltip","View journal details","matTooltipPosition","above",3,"click"]],template:function(t,r){t&1&&(i(0,"div",0)(1,"mat-table",1),_(2,2),s(3,Dt,2,0,"mat-header-cell",3)(4,Ot,2,1,"mat-cell",4),g(),_(5,5),s(6,At,2,0,"mat-header-cell",6)(7,Tt,2,1,"mat-cell",7),g(),_(8,8),s(9,Pt,2,0,"mat-header-cell",9)(10,jt,2,1,"mat-cell",10),g(),_(11,11),s(12,kt,2,0,"mat-header-cell",12)(13,Rt,3,4,"mat-cell",13),g(),_(14,14),s(15,Lt,2,0,"mat-header-cell",15)(16,Ft,3,3,"mat-cell",16),g(),_(17,17),s(18,Jt,2,0,"mat-header-cell",18)(19,Nt,4,1,"mat-cell",19),g(),s(20,Bt,1,0,"mat-header-row",20)(21,Vt,1,0,"mat-row",21),n()()),t&2&&(l(),c("dataSource",r.journals),l(19),c("matHeaderRowDef",r.displayedColumns),l(),c("matRowDefColumns",r.displayedColumns))},dependencies:[v,H,ge,re,me,pe,ce,le,ue,se,de,fe,_e,O,J,x,W,ee,Ze,We],styles:[".table-wrapper[_ngcontent-%COMP%]{display:block;overflow-x:auto}mat-table[_ngcontent-%COMP%]{width:100%}.mat-header-cell[_ngcontent-%COMP%], .mat-cell[_ngcontent-%COMP%]{flex:0 0 auto!important;width:auto!important;white-space:nowrap;padding-right:24px}.mat-column-reference[_ngcontent-%COMP%]{min-width:220px}.mat-column-description[_ngcontent-%COMP%]{min-width:320px}.mat-column-description[_ngcontent-%COMP%]{white-space:normal!important;word-break:break-word;max-width:420px}.mat-cell.mat-column-description[_ngcontent-%COMP%]{line-height:1.35;padding-top:10px;padding-bottom:10px}.mat-column-source[_ngcontent-%COMP%]{min-width:160px}.mat-column-postedAt[_ngcontent-%COMP%]{min-width:220px}.mat-column-status[_ngcontent-%COMP%]{min-width:120px}.mat-column-actions[_ngcontent-%COMP%]{min-width:100px;text-align:center}"]})};function Ht(e,o){if(e&1){let t=w();i(0,"button",13),d("click",function(){E(t);let p=b(2);return y(p.reverse())}),a(1," Reverse Journal "),n()}}function $t(e,o){e&1&&(i(0,"div",14),a(1," This journal has been reversed "),n())}function Gt(e,o){if(e&1&&(i(0,"tr")(1,"td"),a(2),n(),i(3,"td"),a(4),n(),i(5,"td"),a(6),I(7,"number"),n()()),e&2){let t=o.$implicit;l(2),k("",t.accountCode," \u2014 ",t.accountName,""),l(2),j(t.direction),l(2),j(R(7,4,t.amount,"1.2-2"))}}function qt(e,o){if(e&1){let t=w();i(0,"div",1)(1,"div",2)(2,"div")(3,"h2",3),a(4,"Journal Details"),n(),i(5,"div",4),a(6),I(7,"date"),n()(),i(8,"div",5)(9,"button",6),d("click",function(){E(t);let p=b();return y(p.back())}),a(10,"Back"),n(),s(11,Ht,2,0,"button",7),n()(),s(12,$t,2,0,"div",8),i(13,"div",9)(14,"div",10)(15,"strong"),a(16,"Description:"),n(),a(17),n(),i(18,"div",10)(19,"strong"),a(20,"Source:"),n(),a(21),n(),i(22,"div",10)(23,"strong"),a(24,"Posted By:"),n(),a(25),n(),i(26,"table",11)(27,"thead")(28,"tr")(29,"th"),a(30,"Account"),n(),i(31,"th"),a(32,"Direction"),n(),i(33,"th"),a(34,"Amount"),n()()(),i(35,"tbody"),s(36,Gt,8,7,"tr",12),n()()()()}if(e&2){let t=b();l(6),k(" ",t.journal.reference," \xB7 ",R(7,8,t.journal.postedAt,"medium")," "),l(5),c("ngIf",!t.journal.reversed),l(),c("ngIf",t.journal.reversed),l(5),f(" ",t.journal.description,""),l(4),f(" ",t.journal.sourceModule,""),l(4),f(" ",t.journal.postedBy,""),l(11),c("ngForOf",t.journal.entries)}}var ke=class e{constructor(o,t,r,p,P){this.route=o;this.router=t;this.http=r;this.dialog=p;this.snackbar=P;let Ve=this.route.snapshot.paramMap.get("id");Ve&&this.http.get(`${D.apiUrl}/accounting/journals/${Ve}`).subscribe({next:ct=>{this.journal=ct,this.loading=!1},error:()=>{this.snackbar.open("Failed to load journal","Close",{duration:3e3}),this.loading=!1}})}journal;loading=!0;reverse(){this.dialog.open(nt,{width:"420px",data:{title:"Reverse Journal?",message:"Provide a reason for reversing this journal. This action is permanent.",action:"REVERSE",confirmText:"Reverse Journal"}}).afterClosed().subscribe(t=>{t?.confirmed&&this.http.post(`${D.apiUrl}/accounting/journals/${this.journal.id}/reverse`,{reason:t.reason}).subscribe({next:()=>{this.snackbar.open("Journal reversed successfully","Close",{duration:2500}),this.journal.reversed=!0},error:r=>{this.snackbar.open(r?.error?.message||"Failed to reverse journal","Close",{duration:4e3})}})})}back(){this.router.navigate(["/accounts/journals"])}static \u0275fac=function(t){return new(t||e)(m($),m(h),m(F),m(et),m(Z))};static \u0275cmp=C({type:e,selectors:[["ng-component"]],decls:1,vars:1,consts:[["class","page-container p-4",4,"ngIf"],[1,"page-container","p-4"],[1,"page-header","mb-6"],[1,"text-xl","font-semibold"],[1,"text-sm","text-[var(--text-secondary)]"],[1,"actions"],["mat-stroked-button","",3,"click"],["mat-stroked-button","","color","warn",3,"click",4,"ngIf"],["class","reversed-banner",4,"ngIf"],[1,"bg-[var(--surface)]","rounded","p-4"],[1,"mb-2"],[1,"w-full","mt-4"],[4,"ngFor","ngForOf"],["mat-stroked-button","","color","warn",3,"click"],[1,"reversed-banner"]],template:function(t,r){t&1&&s(0,qt,37,11,"div",0),t&2&&c("ngIf",!r.loading&&r.journal)},dependencies:[v,L,Me,Se,H,x,M,tt,ee],styles:[".page-container[_ngcontent-%COMP%]{max-width:1000px;margin:auto}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.page-header[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;gap:8px}.reversed-banner[_ngcontent-%COMP%]{background:#dc26261f;border-left:4px solid #dc2626;padding:10px 14px;margin-bottom:14px;font-weight:600;color:#dc2626}table[_ngcontent-%COMP%]{border-spacing:0;width:100%}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:left;font-weight:600;padding-bottom:8px;color:var(--text-secondary)}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px 0}"]})};function zt(e,o){if(e&1){let t=w();i(0,"div",6),d("click",function(){let p=E(t).$implicit,P=b();return y(P.open(p.id))}),i(1,"div",7),a(2),n(),i(3,"div",3),a(4),n()()}if(e&2){let t=o.$implicit;l(2),k("",t.code," \u2014 ",t.name,""),l(2),j(t.type)}}var Re=class e{constructor(o,t){this.accountsService=o;this.router=t}accounts=[];ngOnInit(){this.accountsService.list().subscribe(o=>this.accounts=o)}open(o){this.router.navigate(["/accounts/ledger",o])}static \u0275fac=function(t){return new(t||e)(m(A),m(h))};static \u0275cmp=C({type:e,selectors:[["ng-component"]],decls:8,vars:1,consts:[[1,"page-container","p-4"],[1,"page-header","mb-6"],[1,"text-xl","font-semibold"],[1,"text-sm","text-[var(--text-secondary)]"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["class","bg-[var(--surface)] p-4 rounded cursor-pointer hover:bg-[var(--surface-hover)]",3,"click",4,"ngFor","ngForOf"],[1,"bg-[var(--surface)]","p-4","rounded","cursor-pointer","hover:bg-[var(--surface-hover)]",3,"click"],[1,"font-medium"]],template:function(t,r){t&1&&(i(0,"div",0)(1,"div",1)(2,"h2",2),a(3,"Ledger"),n(),i(4,"div",3),a(5," Select an account to view transactions "),n()(),i(6,"div",4),s(7,zt,5,3,"div",5),n()()),t&2&&(l(7),c("ngForOf",r.accounts))},dependencies:[v,L],styles:[".page-container[_ngcontent-%COMP%]{max-width:1000px;margin:auto}"]})};var Ut=(e,o)=>({"text-green-500":e,"text-red-500":o});function Yt(e,o){e&1&&(i(0,"div",7),a(1," Loading ledger\u2026 "),n())}function Qt(e,o){e&1&&(i(0,"mat-header-cell"),a(1,"Date"),n())}function Xt(e,o){if(e&1&&(i(0,"mat-cell"),a(1),I(2,"date"),n()),e&2){let t=o.$implicit;l(),f(" ",R(2,1,t.postedAt,"medium")," ")}}function Kt(e,o){e&1&&(i(0,"mat-header-cell"),a(1,"Reference"),n())}function Wt(e,o){if(e&1&&(i(0,"mat-cell"),a(1),n()),e&2){let t=o.$implicit;l(),f(" ",t.journalReference||"\u2014"," ")}}function Zt(e,o){e&1&&(i(0,"mat-header-cell"),a(1,"Type"),n())}function en(e,o){if(e&1&&(i(0,"mat-cell")(1,"span",19),a(2),n()()),e&2){let t=o.$implicit;l(),c("ngClass",qe(2,Ut,t.direction==="DEBIT",t.direction==="CREDIT")),l(),f(" ",t.direction==="DEBIT"?"In":"Out"," ")}}function tn(e,o){e&1&&(i(0,"mat-header-cell"),a(1,"Amount"),n())}function nn(e,o){if(e&1&&(i(0,"mat-cell"),a(1),I(2,"number"),n()),e&2){let t=o.$implicit;l(),f(" ",R(2,1,t.amount,"1.2-2")," ")}}function on(e,o){e&1&&(i(0,"mat-header-cell"),a(1,"Balance"),n())}function an(e,o){if(e&1&&(i(0,"mat-cell"),a(1),I(2,"number"),n()),e&2){let t=o.$implicit;l(),f(" ",R(2,1,t.runningBalance,"1.2-2")," ")}}function rn(e,o){e&1&&u(0,"mat-header-row")}function ln(e,o){e&1&&u(0,"mat-row")}function mn(e,o){if(e&1&&(i(0,"div",8)(1,"mat-table",9),_(2,10),s(3,Qt,2,0,"mat-header-cell",11)(4,Xt,3,4,"mat-cell",12),g(),_(5,13),s(6,Kt,2,0,"mat-header-cell",11)(7,Wt,2,1,"mat-cell",12),g(),_(8,14),s(9,Zt,2,0,"mat-header-cell",11)(10,en,3,5,"mat-cell",12),g(),_(11,15),s(12,tn,2,0,"mat-header-cell",11)(13,nn,3,4,"mat-cell",12),g(),_(14,16),s(15,on,2,0,"mat-header-cell",11)(16,an,3,4,"mat-cell",12),g(),s(17,rn,1,0,"mat-header-row",17)(18,ln,1,0,"mat-row",18),n()()),e&2){let t=b();l(),c("dataSource",t.rows),l(16),c("matHeaderRowDef",t.displayedColumns),l(),c("matRowDefColumns",t.displayedColumns)}}var Le=class e{constructor(o,t,r){this.route=o;this.router=t;this.http=r}accountId;account;rows=[];displayedColumns=["date","reference","direction","amount","balance"];loading=!0;ngOnInit(){let o=this.route.snapshot.paramMap.get("accountId");o&&(this.accountId=o,this.http.get(`${D.apiUrl}/accounts/${o}`).subscribe(t=>this.account=t),this.http.get(`${D.apiUrl}/accounting/ledger/${o}`).subscribe({next:t=>{this.rows=t,this.loading=!1},error:()=>this.loading=!1}))}back(){this.router.navigate(["/accounts/ledger"])}static \u0275fac=function(t){return new(t||e)(m($),m(h),m(F))};static \u0275cmp=C({type:e,selectors:[["app-ledger-view"]],decls:11,vars:5,consts:[[1,"page-container","p-4"],[1,"page-header","mb-6"],[1,"text-xl","font-semibold"],[1,"text-sm","text-[var(--text-secondary)]"],["mat-stroked-button","",3,"click"],["class","py-8 text-center text-gray-400",4,"ngIf"],["class","table-wrapper",4,"ngIf"],[1,"py-8","text-center","text-gray-400"],[1,"table-wrapper"],[1,"mat-elevation-z1","rounded","bg-[var(--surface)]",3,"dataSource"],["matColumnDef","date"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","reference"],["matColumnDef","direction"],["matColumnDef","amount"],["matColumnDef","balance"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[3,"ngClass"]],template:function(t,r){t&1&&(i(0,"div",0)(1,"div",1)(2,"div")(3,"h2",2),a(4),n(),i(5,"div",3),a(6),n()(),i(7,"button",4),d("click",function(){return r.back()}),a(8," Back "),n()(),s(9,Yt,2,0,"div",5)(10,mn,19,3,"div",6),n()),t&2&&(l(4),k(" Ledger \u2014 ",r.account==null?null:r.account.code," ",r.account==null?null:r.account.name," "),l(2),f(" ",r.account==null?null:r.account.type," "),l(3),c("ngIf",r.loading),l(),c("ngIf",!r.loading))},dependencies:[v,Ue,Me,Se,H,ge,re,me,pe,ce,le,ue,se,de,fe,_e,O,x,M],styles:[".page-container[_ngcontent-%COMP%]{max-width:1200px;margin:auto}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.table-wrapper[_ngcontent-%COMP%]{overflow-x:auto}mat-header-cell[_ngcontent-%COMP%]{font-weight:600;color:var(--text-secondary)}mat-cell[_ngcontent-%COMP%]{padding:12px 16px;font-size:.9rem}"]})};var Fe=class e{constructor(o){this.router=o}goChart(){this.router.navigate(["/accounts/chart"])}goNewJournal(){this.router.navigate(["/accounts/journals/new"])}goJournals(){this.router.navigate(["/accounts/journals"])}goLedger(){this.router.navigate(["/accounts/ledger"])}static \u0275fac=function(t){return new(t||e)(m(h))};static \u0275cmp=C({type:e,selectors:[["app-accounts-dashboard"]],decls:42,vars:0,consts:[[1,"page-container","p-4"],[1,"page-header","mb-6"],[1,"text-xl","font-semibold"],[1,"text-sm","text-[var(--text-secondary)]"],[1,"dashboard-grid"],[1,"dash-card",3,"click"],["svgIcon","accounts"],[1,"title"],[1,"desc"],["mat-stroked-button","","color","primary"],["mat-flat-button","","color","primary"],[1,"dash-card","muted",3,"click"],["mat-stroked-button",""]],template:function(t,r){t&1&&(i(0,"div",0)(1,"div",1)(2,"h2",2),a(3,"Accounting"),n(),i(4,"div",3),a(5," Manage accounts, journals, and ledgers "),n()(),i(6,"div",4)(7,"mat-card",5),d("click",function(){return r.goChart()}),u(8,"mat-icon",6),i(9,"div",7),a(10,"Chart of Accounts"),n(),i(11,"div",8),a(12," Create, view, and manage financial accounts "),n(),i(13,"button",9),a(14," View Accounts "),n()(),i(15,"mat-card",5),d("click",function(){return r.goNewJournal()}),i(16,"mat-icon"),a(17,"post_add"),n(),i(18,"div",7),a(19,"New Journal Entry"),n(),i(20,"div",8),a(21," Manually record financial transactions "),n(),i(22,"button",10),a(23," Post Journal "),n()(),i(24,"mat-card",11),d("click",function(){return r.goJournals()}),i(25,"mat-icon"),a(26,"library_books"),n(),i(27,"div",7),a(28,"Journals"),n(),i(29,"div",8),a(30," View all posted accounting journals "),n(),i(31,"button",12),a(32," View Journals "),n()(),i(33,"mat-card",11),d("click",function(){return r.goLedger()}),i(34,"mat-icon"),a(35,"account_balance"),n(),i(36,"div",7),a(37,"Ledger"),n(),i(38,"div",8),a(39," Account balances and transaction history "),n(),i(40,"button",12),a(41," Open Ledger "),n()()()())},dependencies:[v,ve,Ce,x,M,O,J],styles:[".page-container[_ngcontent-%COMP%]{max-width:1200px;margin:auto}.page-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-weight:600}.dashboard-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:16px}.dash-card[_ngcontent-%COMP%]{padding:20px;cursor:pointer;transition:transform .12s ease,box-shadow .12s ease;display:flex;flex-direction:column;gap:10px}.dash-card[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:36px;color:#1a73e8}.dash-card[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:1rem;font-weight:600}.dash-card[_ngcontent-%COMP%]   .desc[_ngcontent-%COMP%]{font-size:.85rem;color:var(--text-secondary);flex:1}.dash-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 16px #0000001f}.dash-card.muted[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#6b7280}"]})};var Je=class e{constructor(o,t,r,p){this.route=o;this.router=t;this.fb=r;this.accounts=p}accountId;form;ngOnInit(){this.form=this.fb.group({code:[{value:"",disabled:!0}],name:["",S.required],type:[{value:"",disabled:!0}]});let o=this.route.snapshot.paramMap.get("id");o&&(this.accountId=o,this.accounts.get(o).subscribe(t=>{this.form.patchValue(t)}))}cancel(){this.router.navigate(["/accounts/chart"])}save(){this.form.invalid||this.accounts.rename(this.accountId,{name:this.form.value.name}).subscribe(()=>this.cancel())}static \u0275fac=function(t){return new(t||e)(m($),m(h),m(X),m(A))};static \u0275cmp=C({type:e,selectors:[["app-account-edit"]],decls:28,vars:2,consts:[[1,"page-container","p-4"],[1,"page-header"],[1,"breadcrumb"],[1,"actions"],["mat-stroked-button","",3,"click"],["mat-flat-button","","color","primary",3,"click","disabled"],[1,"form-grid",3,"formGroup"],["appearance","fill"],["matInput","","formControlName","code"],["matInput","","formControlName","name"],["matInput","","formControlName","type"]],template:function(t,r){t&1&&(i(0,"div",0)(1,"div",1)(2,"div")(3,"h2"),a(4,"Edit Account"),n(),i(5,"div",2),a(6,"Accounts / Chart / Edit"),n()(),i(7,"div",3)(8,"button",4),d("click",function(){return r.cancel()}),a(9,"Cancel"),n(),i(10,"button",5),d("click",function(){return r.save()}),a(11," Save "),n()()(),i(12,"mat-card")(13,"h3"),a(14,"Account Information"),n(),i(15,"form",6)(16,"mat-form-field",7)(17,"mat-label"),a(18,"Account Code"),n(),u(19,"input",8),n(),i(20,"mat-form-field",7)(21,"mat-label"),a(22,"Account Name"),n(),u(23,"input",9),n(),i(24,"mat-form-field",7)(25,"mat-label"),a(26,"Account Type"),n(),u(27,"input",10),n()()()()),t&2&&(l(10),c("disabled",r.form.invalid),l(5),c("formGroup",r.form))},dependencies:[v,K,U,G,q,z,Y,Q,ve,Ce,ie,ne,te,ae,oe,x,M],styles:[".page-container[_ngcontent-%COMP%]{max-width:900px;margin:auto}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:18px}.page-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-weight:600;font-size:1.4rem}.page-header[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]{font-size:.85rem;color:var(--text-secondary)}.page-header[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;gap:.5rem}mat-card[_ngcontent-%COMP%]{padding:18px}mat-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:14px;font-weight:600}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:16px}mat-form-field[_ngcontent-%COMP%]{width:100%}"]})};var Li=[{path:"",component:Fe},{path:"chart",component:Ie},{path:"chart/create",component:Oe},{path:"chart/:id",component:Je},{path:"journals/new",component:Te},{path:"journals",component:je},{path:"journals/:id",component:ke},{path:"ledger",component:Re},{path:"ledger/:accountId",component:Le}];export{Li as ACCOUNTS_ROUTES};
