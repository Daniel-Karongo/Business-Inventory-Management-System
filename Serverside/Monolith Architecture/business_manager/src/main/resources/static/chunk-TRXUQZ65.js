import{a as J}from"./chunk-KCBQSHO2.js";import{a as G,b as I}from"./chunk-RI2EOWWF.js";import"./chunk-MS4AQ6UA.js";import{a as X,b as Y}from"./chunk-H37LQHOQ.js";import{d as V}from"./chunk-DF6WYVPK.js";import"./chunk-MJONFXFY.js";import{a as U,b as $}from"./chunk-BIVTK5YB.js";import{c as oe,d as re}from"./chunk-ZFWGKVXC.js";import"./chunk-3RK6DDJD.js";import{a as q}from"./chunk-CONPK5ZF.js";import{b as H,h as z}from"./chunk-3ZV2DC5Q.js";import"./chunk-SGYCFQGT.js";import{d as F,h as B,l as W,w as N}from"./chunk-Z2GGFO6C.js";import"./chunk-75T6YVBZ.js";import{g as L,h as R}from"./chunk-TENNXE3V.js";import"./chunk-2X53NFZU.js";import{d as ae}from"./chunk-VUFC7WNX.js";import"./chunk-CDHEWSLI.js";import{a as j}from"./chunk-5DTMLZHP.js";import{Bb as P,Ib as n,Jb as i,Ob as A,Qb as g,Rb as m,Tc as D,Uc as O,Yc as k,Z as te,_c as E,ac as o,bb as r,bd as S,ca as ie,cc as u,dc as w,gb as s,gc as C,hc as x,ic as v,jd as ne,ma as _,na as h,nb as M,pc as y,rc as b,sb as f,zb as l}from"./chunk-3DYKM6ZU.js";import"./chunk-FJYW2LMB.js";var K=class a{constructor(t){this.router=t}goVat(){this.router.navigate(["/finance/tax/vat"])}goCorporate(){this.router.navigate(["/finance/tax/corporate"])}static \u0275fac=function(e){return new(e||a)(s(ae))};static \u0275cmp=M({type:a,selectors:[["app-tax-dashboard"]],decls:14,vars:0,consts:[[1,"page-container","p-4"],[1,"text-xl","font-semibold","mb-6"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"tax-card",3,"click"]],template:function(e,c){e&1&&(n(0,"div",0)(1,"h2",1),o(2," Tax Center "),i(),n(3,"div",2)(4,"mat-card",3),g("click",function(){return c.goVat()}),n(5,"h3"),o(6,"VAT"),i(),n(7,"p"),o(8,"File VAT returns and process payments"),i()(),n(9,"mat-card",3),g("click",function(){return c.goCorporate()}),n(10,"h3"),o(11,"Corporate Tax"),i(),n(12,"p"),o(13,"Accrue and pay corporate income tax"),i()()()())},dependencies:[S,I,G],styles:[".page-container[_ngcontent-%COMP%]{max-width:1200px;margin:auto}.tax-card[_ngcontent-%COMP%]{padding:24px;cursor:pointer;transition:.2s}.tax-card[_ngcontent-%COMP%]:hover{transform:translateY(-3px)}"]})};var T=class a{constructor(t){this.http=t}vatBase=`${j.apiUrl}/tax/vat`;corporateBase=`${j.apiUrl}/tax/corporate`;listVat(){return this.http.get(this.vatBase)}fileVat(t){return this.http.post(`${this.vatBase}/file/${t}`,{})}payVat(t,e){return this.http.post(`${this.vatBase}/pay/${t}`,{},{params:{accountId:e}})}accrueCorporate(t,e,c){return this.http.post(`${this.corporateBase}/accrue/${t}`,{},{params:{from:e,to:c}})}payCorporate(t,e){return this.http.post(`${this.corporateBase}/pay/${t}`,{},{params:{accountId:e}})}listCorporate(){return this.http.get(`${j.apiUrl}/tax/corporate`)}static \u0275fac=function(e){return new(e||a)(ie(ne))};static \u0275prov=te({token:a,factory:a.\u0275fac,providedIn:"root"})};function xe(a,t){a&1&&(n(0,"div",6),o(1," Loading VAT filings... "),i())}function ve(a,t){if(a&1&&(n(0,"mat-option",19),o(1),i()),a&2){let e=t.$implicit;l("value",e.id),r(),w(" ",e.code," \u2014 ",e.name," ")}}function _e(a,t){if(a&1){let e=A();n(0,"div",14)(1,"mat-form-field",15)(2,"mat-label"),o(3,"Payment Account"),i(),n(4,"mat-select",16),v("ngModelChange",function(d){_(e);let p=m(2);return x(p.selectedAccountId,d)||(p.selectedAccountId=d),h(d)}),f(5,ve,2,3,"mat-option",17),i()(),n(6,"button",18),g("click",function(){_(e);let d=m().$implicit,p=m();return h(p.pay(d))}),o(7," Pay VAT "),i()()}if(a&2){let e=m(2);r(4),C("ngModel",e.selectedAccountId),r(),l("ngForOf",e.accounts),r(),l("disabled",!e.selectedAccountId)}}function he(a,t){if(a&1&&(n(0,"div",7)(1,"div",8)(2,"div")(3,"div",9),o(4),i(),n(5,"div",10),o(6),y(7,"date"),i()(),n(8,"div",11),o(9),i()(),n(10,"div",12),o(11),y(12,"number"),i(),f(13,_e,8,3,"div",13),i()),a&2){let e=t.$implicit;r(4),w(" Period: ",e.period==null?null:e.period.startDate," \u2192 ",e.period==null?null:e.period.endDate," "),r(2),u(" Filed: ",b(7,10,e.filedAt,"medium")," "),r(2),P("paid",e.paid)("unpaid",!e.paid),r(),u(" ",e.paid?"PAID":"UNPAID"," "),r(2),u(" VAT Payable: ",b(12,13,e.vatPayable,"1.2-2")," "),r(2),l("ngIf",!e.paid)}}var Q=class a{constructor(t,e,c){this.taxService=t;this.accountsService=e;this.snackbar=c}filings=[];accounts=[];loading=!1;selectedAccountId;search="";ngOnInit(){this.load(),this.accountsService.list().subscribe(t=>this.accounts=t)}load(){this.loading=!0,this.taxService.listVat().subscribe({next:t=>{this.filings=t,this.loading=!1},error:()=>{this.snackbar.open("Failed to load VAT filings","Close",{duration:3e3}),this.loading=!1}})}pay(t){this.selectedAccountId&&this.taxService.payVat(t.id,this.selectedAccountId).subscribe({next:()=>{this.snackbar.open("VAT payment successful","Close",{duration:2e3}),this.load()},error:()=>this.snackbar.open("VAT payment failed","Close",{duration:3e3})})}filtered(){return this.search?this.filings.filter(t=>t.period?.id?.toLowerCase().includes(this.search.toLowerCase())):this.filings}static \u0275fac=function(e){return new(e||a)(s(T),s(J),s(U))};static \u0275cmp=M({type:a,selectors:[["app-vat-center"]],decls:7,vars:3,consts:[[1,"page-container","p-4"],[1,"text-xl","font-semibold","mb-4"],[1,"mb-4"],["type","text","placeholder","Search by period ID...",1,"search-input",3,"ngModelChange","ngModel"],["class","loading-hint",4,"ngIf"],["class","vat-card",4,"ngFor","ngForOf"],[1,"loading-hint"],[1,"vat-card"],[1,"header-row"],[1,"title"],[1,"meta"],[1,"status"],[1,"amount"],["class","payment-row",4,"ngIf"],[1,"payment-row"],["appearance","fill"],[3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["mat-flat-button","","color","primary",3,"click","disabled"],[3,"value"]],template:function(e,c){e&1&&(n(0,"div",0)(1,"h2",1),o(2," VAT Center (Consolidated) "),i(),n(3,"div",2)(4,"input",3),v("ngModelChange",function(p){return x(c.search,p)||(c.search=p),p}),i()(),f(5,xe,2,0,"div",4)(6,he,14,16,"div",5),i()),e&2&&(r(4),C("ngModel",c.search),r(),l("ngIf",c.loading),r(),l("ngForOf",c.filtered()))},dependencies:[S,D,O,E,k,I,R,L,$,Y,z,H,X,V,q,N,F,B,W],styles:[".vat-card[_ngcontent-%COMP%]{background:var(--surface);padding:18px;margin-bottom:16px;border-radius:10px;border:1px solid var(--border)}.header-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.status[_ngcontent-%COMP%]{padding:6px 12px;font-size:.75rem;font-weight:600;border-radius:6px}.paid[_ngcontent-%COMP%]{background:#22c55e1a;color:#22c55e}.unpaid[_ngcontent-%COMP%]{background:#ef44441a;color:#ef4444}.amount[_ngcontent-%COMP%]{margin-top:8px;font-weight:600}.payment-row[_ngcontent-%COMP%]{margin-top:12px;display:flex;gap:12px;align-items:center}"]})};function Me(a,t){a&1&&(n(0,"div",10),o(1," Loading filings... "),i())}function ye(a,t){if(a&1&&(n(0,"mat-option",22),o(1),i()),a&2){let e=t.$implicit;l("value",e.id),r(),w(" ",e.code," \u2014 ",e.name," ")}}function be(a,t){if(a&1){let e=A();n(0,"div",18)(1,"mat-form-field",4)(2,"mat-label"),o(3,"Payment Account"),i(),n(4,"mat-select",19),v("ngModelChange",function(d){_(e);let p=m(2);return x(p.selectedAccountId,d)||(p.selectedAccountId=d),h(d)}),f(5,ye,2,3,"mat-option",20),i()(),n(6,"button",21),g("click",function(){_(e);let d=m().$implicit,p=m();return h(p.pay(d))}),o(7," Pay "),i()()}if(a&2){let e=m(2);r(4),C("ngModel",e.selectedAccountId),r(),l("ngForOf",e.accounts),r(),l("disabled",!e.selectedAccountId)}}function Se(a,t){if(a&1&&(n(0,"div",11)(1,"div",12)(2,"div")(3,"div",13),o(4),i(),n(5,"div",14),o(6),y(7,"date"),i()(),n(8,"div",15),o(9),i()(),n(10,"div",16),o(11),y(12,"number"),i(),f(13,be,8,3,"div",17),i()),a&2){let e=t.$implicit;r(4),u(" Period ID: ",e.periodId," "),r(2),u(" Filed: ",b(7,9,e.filedAt,"medium")," "),r(2),P("paid",e.paid)("unpaid",!e.paid),r(),u(" ",e.paid?"PAID":"UNPAID"," "),r(2),u(" Tax Amount: ",b(12,12,e.taxAmount,"1.2-2")," "),r(2),l("ngIf",!e.paid)}}var Z=class a{constructor(t,e,c){this.taxService=t;this.accountsService=e;this.snackbar=c}filings=[];accounts=[];periodId="";fromDate="";toDate="";selectedAccountId;loading=!1;ngOnInit(){this.load(),this.accountsService.list().subscribe(t=>this.accounts=t)}load(){this.loading=!0,this.taxService.listCorporate().subscribe({next:t=>{this.filings=t,this.loading=!1},error:()=>this.loading=!1})}accrue(){if(!this.periodId||!this.fromDate||!this.toDate){this.snackbar.open("All fields required","Close",{duration:2e3});return}this.taxService.accrueCorporate(this.periodId,new Date(this.fromDate).toISOString(),new Date(this.toDate).toISOString()).subscribe({next:()=>{this.snackbar.open("Corporate tax accrued","Close",{duration:2e3}),this.load()},error:()=>this.snackbar.open("Accrual failed","Close",{duration:3e3})})}pay(t){this.selectedAccountId&&this.taxService.payCorporate(t.id,this.selectedAccountId).subscribe({next:()=>{this.snackbar.open("Corporate tax paid","Close",{duration:2e3}),this.load()},error:()=>this.snackbar.open("Payment failed","Close",{duration:3e3})})}static \u0275fac=function(e){return new(e||a)(s(T),s(J),s(U))};static \u0275cmp=M({type:a,selectors:[["app-corporate-tax-center"]],decls:23,vars:5,consts:[[1,"page-container","p-4"],[1,"text-xl","font-semibold","mb-6"],[1,"accrual-card"],[1,"accrual-grid"],["appearance","fill"],["matInput","",3,"ngModelChange","ngModel"],["matInput","","type","date",3,"ngModelChange","ngModel"],["mat-flat-button","","color","primary",3,"click"],["class","loading-hint mt-4",4,"ngIf"],["class","filing-card",4,"ngFor","ngForOf"],[1,"loading-hint","mt-4"],[1,"filing-card"],[1,"header-row"],[1,"title"],[1,"meta"],[1,"status"],[1,"amount"],["class","payment-row",4,"ngIf"],[1,"payment-row"],[3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["mat-flat-button","","color","primary",3,"click","disabled"],[3,"value"]],template:function(e,c){e&1&&(n(0,"div",0)(1,"h2",1),o(2," Corporate Tax Center (Consolidated) "),i(),n(3,"mat-card",2)(4,"h3"),o(5,"Accrue Corporate Tax"),i(),n(6,"div",3)(7,"mat-form-field",4)(8,"mat-label"),o(9,"Period ID"),i(),n(10,"input",5),v("ngModelChange",function(p){return x(c.periodId,p)||(c.periodId=p),p}),i()(),n(11,"mat-form-field",4)(12,"mat-label"),o(13,"From"),i(),n(14,"input",6),v("ngModelChange",function(p){return x(c.fromDate,p)||(c.fromDate=p),p}),i()(),n(15,"mat-form-field",4)(16,"mat-label"),o(17,"To"),i(),n(18,"input",6),v("ngModelChange",function(p){return x(c.toDate,p)||(c.toDate=p),p}),i()(),n(19,"button",7),g("click",function(){return c.accrue()}),o(20," Accrue "),i()()(),f(21,Me,2,0,"div",8)(22,Se,14,15,"div",9),i()),e&2&&(r(10),C("ngModel",c.periodId),r(4),C("ngModel",c.fromDate),r(4),C("ngModel",c.toDate),r(3),l("ngIf",c.loading),r(),l("ngForOf",c.filings))},dependencies:[S,D,O,E,k,N,F,B,W,I,G,R,L,$,q,z,H,re,oe,Y,X,V],styles:[".accrual-card[_ngcontent-%COMP%]{margin-bottom:24px;padding:18px}.accrual-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:16px;align-items:center}.filing-card[_ngcontent-%COMP%]{background:var(--surface);padding:18px;margin-bottom:16px;border-radius:10px;border:1px solid var(--border)}.header-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.status[_ngcontent-%COMP%]{padding:6px 12px;font-size:.75rem;font-weight:600;border-radius:6px}.paid[_ngcontent-%COMP%]{background:#22c55e1a;color:#22c55e}.unpaid[_ngcontent-%COMP%]{background:#ef44441a;color:#ef4444}.amount[_ngcontent-%COMP%]{margin-top:8px;font-weight:600}.payment-row[_ngcontent-%COMP%]{margin-top:12px;display:flex;gap:12px;align-items:center}"]})};var et=[{path:"",component:K},{path:"vat",component:Q},{path:"corporate",component:Z}];export{et as TAX_ROUTES};
