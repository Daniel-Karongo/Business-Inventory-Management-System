import{a as $}from"./chunk-RUIAFSGF.js";import{a as r}from"./chunk-5DTMLZHP.js";import{Z as h,ca as g,da as c,id as d,jd as m,q as b}from"./chunk-3DYKM6ZU.js";var f=class n{constructor(e,t){this.http=e;this.authService=t}base=r.endpoints.users.base;list(e=0,t=25,s={}){let i=new d;Object.keys(s).forEach(p=>{if(p==="deleted")return;let a=s[p];a!=null&&a!==""&&(i=i.set(p,String(a)))});let l=this.authService.getSnapshot(),o=!!l&&["SUPERUSER","ADMIN","MANAGER"].includes(l.role),u=`${r.apiUrl}${r.endpoints.users.getAll(o?void 0:!1)}`;return this.http.get(u,{params:i}).pipe(b(p=>{let a=e*t,U=a+t;return{data:p.slice(a,U),total:p.length}}))}get(e,t=!1){let s=`${r.apiUrl}${r.endpoints.users.get(e,t)}`;return this.http.get(s)}create(e){return this.http.post(`${r.apiUrl}${r.endpoints.users.register}`,e)}bulkImport(e){return this.http.post(`${r.apiUrl}${r.endpoints.users.base}/import`,e)}update(e,t){let s=`${r.apiUrl}${r.endpoints.users.update(e)}`;return this.http.patch(s,t)}softDelete(e,t){return this.http.delete(`${this.base}/${e}`,{params:{soft:!0},body:t??""})}restore(e,t){return this.http.patch(`${this.base}/${e}/restore`,t??"")}hardDelete(e,t){return this.http.delete(`${this.base}/${e}`,{params:{soft:"false"},body:t??""})}softDeleteBulk(e,t){return this.http.post(`${this.base}/bulk/soft-delete`,{ids:e,reason:t??""})}restoreBulk(e,t){return this.http.post(`${this.base}/bulk/restore`,{ids:e,reason:t??""})}hardDeleteBulk(e,t){return this.http.post(`${this.base}/bulk/hard-delete`,{ids:e,reason:t??""})}uploadImages(e,t,s=!1){let i=new FormData;t.forEach((o,u)=>{i.append(`userImagesFiles[${u}].file`,o.file),i.append(`userImagesFiles[${u}].description`,o.description??"")}),i.append("deleteOldImages",String(s));let l=`${r.apiUrl}${r.endpoints.users.updateImages(e)}`;return this.http.patch(l,i)}listImages(e,t){let s=new d;t!==void 0&&(s=s.set("deleted",String(t))),console.log(s);let i=`${r.apiUrl}${r.endpoints.users.images.forUser(e)}`;return this.http.get(i,{params:s})}deleteAllImages(e){let t=`${r.apiUrl}${r.endpoints.users.images.softDeleteAll(e)}`;return this.http.delete(t)}restoreImage(e,t){let s=`${r.apiUrl}${r.endpoints.users.images.restore(e,t)}`;return this.http.patch(s,{},{responseType:"text"})}softDeleteImage(e,t){let s=`${r.apiUrl}${r.endpoints.users.images.softDelete(e,t)}`;return this.http.delete(s,{responseType:"text"})}restoreAllImages(e){let t=`${r.apiUrl}${r.endpoints.users.images.restoreAll(e)}`;return this.http.patch(t,{})}hardDeleteImage(e,t){let s=`${r.apiUrl}${r.endpoints.users.images.hardDelete(e,t)}`;return this.http.delete(s,{responseType:"text"})}hardDeleteAllImages(e){let t=`${r.apiUrl}${r.endpoints.users.images.hardDeleteAll(e)}`;return this.http.delete(t)}auditsForUser(e){let t=`${r.apiUrl}${r.endpoints.users.audits.userTarget(e)}`;return this.http.get(t)}auditsDoneByUser(e){let t=`${r.apiUrl}${r.endpoints.users.audits.userDoer(e)}`;return this.http.get(t)}imageAuditTarget(e){let t=`${r.apiUrl}${r.endpoints.users.audits.imageTarget(e)}`;return this.http.get(t)}imageAuditDoer(e){let t=`${r.apiUrl}${r.endpoints.users.audits.imageDoer(e)}`;return this.http.get(t)}getUserRollcalls(e){return this.http.get(`${r.apiUrl}/rollcall/user/${e}`)}getUserImageBlob(e,t,s=!1){let i=`${r.apiUrl}/users/images/${e}/${encodeURIComponent(t)}?deleted=${s}`;return this.http.get(i,{responseType:"blob"})}static \u0275fac=function(t){return new(t||n)(g(m),g($))};static \u0275prov=h({token:n,factory:n.\u0275fac,providedIn:"root"})};var D=class n{http=c(m);base=`${r.apiUrl}${r.endpoints.departments.base}`;create(e){return this.http.post(this.base,e)}bulkImport(e){return this.http.post(`${this.base}/import`,e)}update(e,t){return this.http.put(`${this.base}/${e}`,t)}get(e){return this.http.get(`${this.base}/${e}`)}getAll(e){return this.http.get(this.base,{params:{deleted:e??!1}})}getUserDepartments(e){return this.http.get(`${this.base}/user/${e}`)}delete(e,t=!0){return this.http.delete(`${this.base}/delete/${e}`,{params:{soft:t}})}deleteBulk(e,t=!0){return this.http.delete(`${this.base}/delete/bulk`,{body:e,params:{soft:t}})}restore(e){return this.http.patch(`${this.base}/restore/${e}`,{})}restoreBulk(e){return this.http.patch(`${this.base}/restore/bulk`,e)}getAudits(e){return this.http.get(`${this.base}/${e}/audits`)}getAllAudits(){return this.http.get(`${this.base}/all/audits`)}getAuditsByPerformer(e){return this.http.get(`${this.base}/audits/performer/${e}`)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=h({token:n,factory:n.\u0275fac,providedIn:"root"})};export{f as a,D as b};
