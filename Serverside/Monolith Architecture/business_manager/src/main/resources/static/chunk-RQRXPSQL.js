import{a as Ee,b as Pe,c as Ie,d as we,e as Te,f as ke,g as Oe,h as Re,i as Ae,j as Ne,k as Be}from"./chunk-NDRSAYSM.js";import{b as Fe,h as je}from"./chunk-5GYNI7WA.js";import{a as k,b as O,c as L,h as Me}from"./chunk-G6DPSII6.js";import{a as Se,b as be}from"./chunk-GQKP7E5B.js";import"./chunk-MJONFXFY.js";import{b as ye,c as xe}from"./chunk-F3TBVMOI.js";import{c as X,d as q}from"./chunk-ZFWGKVXC.js";import"./chunk-3RK6DDJD.js";import{a as U}from"./chunk-CONPK5ZF.js";import{b as K,h as $}from"./chunk-3ZV2DC5Q.js";import"./chunk-SGYCFQGT.js";import{d as A,f as I,h as N,i as B,m as F,n as j,p as H,s as V,v as z,x as G}from"./chunk-Z2GGFO6C.js";import"./chunk-75T6YVBZ.js";import{a as De}from"./chunk-SMNV7GRH.js";import{f as he,g as D,h as E}from"./chunk-TENNXE3V.js";import"./chunk-2X53NFZU.js";import{b as ve,e as ge,h as Ce}from"./chunk-VUFC7WNX.js";import"./chunk-CDHEWSLI.js";import{a as S}from"./chunk-5DTMLZHP.js";import{$c as h,Bb as me,Ib as a,Jb as n,Kb as g,Lb as y,Mb as x,Ob as R,Qb as f,Rb as C,Uc as ce,Yc as pe,Z as re,ac as o,ad as ue,bb as r,bc as _,bd as M,ca as le,cc as v,dc as se,gb as c,id as fe,jd as _e,ma as w,mc as de,na as T,nb as b,pc as p,rc as u,sb as d,sc as Z,zb as m}from"./chunk-3DYKM6ZU.js";import"./chunk-FJYW2LMB.js";var P=class t{constructor(i){this.http=i}base=S.apiUrl+S.endpoints.payments.base;create(i){return this.http.post(this.base,i)}refund(i){return this.http.post(S.apiUrl+S.endpoints.payments.refund(i),{})}reverse(i,e){let l=new fe;return e&&(l=l.set("note",e)),this.http.post(S.apiUrl+S.endpoints.payments.reverse(i),{},{params:l})}initiateMpesa(i,e,l){return this.http.post(S.apiUrl+S.endpoints.payments.mpesa.initiateStk,null,{params:{saleId:i,phone:e,amount:l}})}getBySale(i){return this.http.get(S.apiUrl+S.endpoints.sales.payments(i))}static \u0275fac=function(e){return new(e||t)(le(_e))};static \u0275prov=re({token:t,factory:t.\u0275fac,providedIn:"root"})};var J=class t{constructor(i,e,l,s){this.data=i;this.dialogRef=e;this.fb=l;this.paymentsService=s;this.form=this.fb.group({amount:[i.sale.totalAmount,[I.required,I.min(1)]],note:["Paid in cash"]})}form;balanceDue(){let i=(this.data.sale.payments||[]).filter(e=>e.status==="SUCCESS").reduce((e,l)=>e+Number(l.amount),0);return Number(this.data.sale.totalAmount)-i}submit(){this.form.invalid||this.paymentsService.create({saleId:this.data.sale.id,amount:this.form.value.amount,method:"CASH",note:this.form.value.note}).subscribe(()=>this.dialogRef.close(!0))}cancel(){this.dialogRef.close(!1)}static \u0275fac=function(e){return new(e||t)(c(O),c(k),c(z),c(P))};static \u0275cmp=b({type:t,selectors:[["app-cash-payment-dialog"]],decls:24,vars:5,consts:[[1,"dialog-container"],["mat-dialog-title","",1,"dialog-title"],["mat-dialog-content","",1,"dialog-body"],[1,"summary-card"],[1,"summary-label"],[1,"summary-amount"],[1,"dialog-form",3,"formGroup"],["appearance","fill",1,"w-full"],["matInput","","type","number","formControlName","amount"],["matInput","","formControlName","note"],["mat-dialog-actions","",1,"dialog-actions"],["mat-stroked-button","",3,"click"],["mat-flat-button","","color","primary",3,"click"]],template:function(e,l){e&1&&(a(0,"div",0)(1,"h2",1),o(2," Cash Payment "),n(),a(3,"div",2)(4,"div",3)(5,"div",4),o(6,"Balance Due"),n(),a(7,"div",5),o(8),p(9,"currency"),n()(),a(10,"form",6)(11,"mat-form-field",7)(12,"mat-label"),o(13,"Amount Received"),n(),g(14,"input",8),n(),a(15,"mat-form-field",7)(16,"mat-label"),o(17,"Note (optional)"),n(),g(18,"input",9),n()()(),a(19,"div",10)(20,"button",11),f("click",function(){return l.cancel()}),o(21," Cancel "),n(),a(22,"button",12),f("click",function(){return l.submit()}),o(23," Confirm Payment "),n()()()),e&2&&(r(8),v(" ",u(9,2,l.balanceDue(),"KES ")," "),r(2),m("formGroup",l.form))},dependencies:[M,h,G,F,A,j,N,B,H,V,U,$,K,q,X,E,D],styles:[".dialog-container[_ngcontent-%COMP%]{padding:1rem;border-radius:.75rem}.dialog-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;padding-bottom:.5rem}.dialog-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.25rem}.summary-card[_ngcontent-%COMP%]{background:var(--surface-hover);border-radius:6px;padding:1rem}.summary-label[_ngcontent-%COMP%]{font-size:.75rem;color:var(--text-secondary);margin-bottom:.25rem}.summary-amount[_ngcontent-%COMP%]{font-size:1.4rem;font-weight:600;letter-spacing:.3px}.dialog-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.dialog-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:.75rem;padding-top:.75rem}"]})};var W=class t{constructor(i,e){this.data=i;this.dialogRef=e}close(){this.dialogRef.close(!0)}static \u0275fac=function(e){return new(e||t)(c(O),c(k))};static \u0275cmp=b({type:t,selectors:[["app-mpesa-payment-success-dialog"]],decls:24,vars:6,consts:[[1,"dialog-container"],["mat-dialog-title","",1,"dialog-title"],["mat-dialog-content","",1,"dialog-body"],[1,"summary-card","success"],[1,"summary-label"],[1,"summary-amount"],[1,"details"],[1,"row"],[1,"label"],[1,"value"],[1,"value","mono"],["mat-dialog-actions","",1,"dialog-actions"],["mat-flat-button","","color","primary",3,"click"]],template:function(e,l){e&1&&(a(0,"div",0)(1,"h2",1),o(2," Payment Successful "),n(),a(3,"div",2)(4,"div",3)(5,"div",4),o(6,"Amount Paid"),n(),a(7,"div",5),o(8),p(9,"currency"),n()(),a(10,"div",6)(11,"div",7)(12,"span",8),o(13,"Phone"),n(),a(14,"span",9),o(15),n()(),a(16,"div",7)(17,"span",8),o(18,"Receipt"),n(),a(19,"span",10),o(20),n()()()(),a(21,"div",11)(22,"button",12),f("click",function(){return l.close()}),o(23," OK "),n()()()),e&2&&(r(8),v(" ",u(9,3,l.data.amount,"KES ")," "),r(7),_(l.data.phone),r(5),_(l.data.receipt))},dependencies:[M,h,E,D],styles:["[_nghost-%COMP%]{display:block}.dialog-container[_ngcontent-%COMP%]{padding:1rem;border-radius:.75rem}.dialog-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600}.dialog-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.25rem}.summary-card[_ngcontent-%COMP%]{background:var(--surface-hover);border-radius:6px;padding:1rem}.summary-card.success[_ngcontent-%COMP%]{border-left:4px solid #16a34a}.summary-label[_ngcontent-%COMP%]{font-size:.75rem;color:var(--text-secondary)}.summary-amount[_ngcontent-%COMP%]{font-size:1.4rem;font-weight:600}.details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:1rem}.label[_ngcontent-%COMP%]{font-size:.75rem;color:var(--text-secondary);text-transform:uppercase}.value[_ngcontent-%COMP%]{font-size:.9rem;font-weight:500}.value.mono[_ngcontent-%COMP%]{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace}.dialog-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;padding-top:.75rem}"]})};var Y=class t{constructor(i,e,l,s,oe){this.data=i;this.dialogRef=e;this.dialog=l;this.fb=s;this.paymentsService=oe;this.form=this.fb.group({phone:["",[I.required]],amount:[i.sale.totalAmount,[I.required,I.min(1)]]})}form;loading=!1;pollHandle;submit(){this.form.invalid||(this.loading=!0,this.paymentsService.initiateMpesa(this.data.sale.id,this.form.value.phone,this.form.value.amount).subscribe({next:()=>this.startPollingForSuccess(),error:()=>this.loading=!1}))}startPollingForSuccess(){let i=this.data.sale.id;this.pollHandle=window.setInterval(()=>{this.paymentsService.getBySale(i).subscribe(e=>{let l=e.find(s=>s.method==="MPESA"&&s.status==="SUCCESS");l&&(clearInterval(this.pollHandle),this.loading=!1,this.dialog.open(W,{width:"380px",disableClose:!0,data:{amount:l.amount,phone:l.providerReference,receipt:l.transactionCode}}).afterClosed().subscribe(()=>{this.dialogRef.close(!0)}))})},2e3)}cancel(){this.pollHandle&&clearInterval(this.pollHandle),this.dialogRef.close(!1)}ngOnDestroy(){this.pollHandle&&clearInterval(this.pollHandle)}static \u0275fac=function(e){return new(e||t)(c(O),c(k),c(L),c(z),c(P))};static \u0275cmp=b({type:t,selectors:[["app-mpesa-payment-dialog"]],decls:26,vars:6,consts:[[1,"dialog-container"],["mat-dialog-title","",1,"dialog-title"],["mat-dialog-content","",1,"dialog-body"],[1,"summary-card","mpesa"],[1,"summary-label"],[1,"summary-amount"],[1,"dialog-form",3,"formGroup"],["appearance","fill",1,"w-full"],["matInput","","placeholder","2547XXXXXXXX","formControlName","phone"],["matInput","","type","number","formControlName","amount"],[1,"dialog-hint"],["mat-dialog-actions","",1,"dialog-actions"],["mat-stroked-button","",3,"click"],["mat-flat-button","","color","primary",3,"click","disabled"]],template:function(e,l){e&1&&(a(0,"div",0)(1,"h2",1),o(2," Mpesa Payment "),n(),a(3,"div",2)(4,"div",3)(5,"div",4),o(6,"Amount to Charge"),n(),a(7,"div",5),o(8),p(9,"currency"),n()(),a(10,"form",6)(11,"mat-form-field",7)(12,"mat-label"),o(13,"Phone Number"),n(),g(14,"input",8),n(),a(15,"mat-form-field",7)(16,"mat-label"),o(17,"Amount"),n(),g(18,"input",9),n()(),a(19,"p",10),o(20," An STK prompt will be sent to the customer\u2019s phone to authorize payment. "),n()(),a(21,"div",11)(22,"button",12),f("click",function(){return l.cancel()}),o(23," Cancel "),n(),a(24,"button",13),f("click",function(){return l.submit()}),o(25," Send STK "),n()()()),e&2&&(r(8),v(" ",u(9,3,l.form.value.amount,"KES ")," "),r(2),m("formGroup",l.form),r(14),m("disabled",l.loading))},dependencies:[M,h,G,F,A,j,N,B,H,V,U,$,K,q,X,E,D],styles:[".dialog-container[_ngcontent-%COMP%]{padding:1rem;border-radius:.75rem}.dialog-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600}.dialog-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.25rem}.summary-card[_ngcontent-%COMP%]{background:var(--surface-hover);border-radius:6px;padding:1rem}.summary-card.mpesa[_ngcontent-%COMP%]{border-left:4px solid #16a34a}.summary-label[_ngcontent-%COMP%]{font-size:.75rem;color:var(--text-secondary)}.summary-amount[_ngcontent-%COMP%]{font-size:1.4rem;font-weight:600}.dialog-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.dialog-hint[_ngcontent-%COMP%]{font-size:.85rem;color:var(--text-secondary);line-height:1.4}.dialog-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:.75rem;padding-top:.75rem}"]})};var Le=t=>["/sales",t,"receipt"];function Ke(t,i){if(t&1&&(a(0,"div")(1,"div",9),o(2,"Phone"),n(),a(3,"div",47),o(4),n()()),t&2){let e=C(3);r(4),v(" ",e.sale.customer.phoneNumbers[0]," ")}}function $e(t,i){if(t&1&&(a(0,"div")(1,"div",9),o(2,"Email"),n(),a(3,"div",48),o(4),n()()),t&2){let e=C(3);r(4),v(" ",e.sale.customer.emailAddresses[0]," ")}}function Ue(t,i){if(t&1&&(a(0,"div",38),g(1,"div",39),a(2,"div",40)(3,"h3",41),o(4," Customer "),n(),a(5,"mat-icon",42),o(6,"person"),n()(),a(7,"div",43)(8,"div",44)(9,"div",9),o(10,"Name"),n(),a(11,"div",45),o(12),n()(),d(13,Ke,5,1,"div",46)(14,$e,5,1,"div",46),n()()),t&2){let e=C(2);r(12),_(e.sale.customer.name),r(),m("ngIf",e.sale.customer.phoneNumbers==null?null:e.sale.customer.phoneNumbers.length),r(),m("ngIf",e.sale.customer.emailAddresses==null?null:e.sale.customer.emailAddresses.length)}}function Xe(t,i){t&1&&(a(0,"th",49),o(1,"Product"),n())}function qe(t,i){if(t&1&&(a(0,"td",50),o(1),n()),t&2){let e=i.$implicit;r(),_(e.productName)}}function Qe(t,i){t&1&&(a(0,"th",49),o(1,"Branch"),n())}function Je(t,i){if(t&1&&(a(0,"td",50),o(1),p(2,"slice"),n()),t&2){let e=i.$implicit;r(),_(Z(2,1,e.branchId,0,8))}}function We(t,i){t&1&&(a(0,"th",49),o(1,"Qty"),n())}function Ye(t,i){if(t&1&&(a(0,"td",50),o(1),n()),t&2){let e=i.$implicit;r(),_(e.quantity)}}function Ze(t,i){t&1&&(a(0,"th",49),o(1,"Unit"),n())}function et(t,i){if(t&1&&(a(0,"td",50),o(1),p(2,"currency"),n()),t&2){let e=i.$implicit;r(),_(u(2,1,e.unitPrice,"KES "))}}function tt(t,i){t&1&&(a(0,"th",49),o(1,"Total"),n())}function it(t,i){if(t&1&&(a(0,"td",50),o(1),p(2,"currency"),n()),t&2){let e=i.$implicit;r(),_(u(2,1,e.lineTotal,"KES "))}}function nt(t,i){t&1&&g(0,"tr",51)}function at(t,i){t&1&&g(0,"tr",52)}function ot(t,i){if(t&1){let e=R();a(0,"div",33)(1,"button",53),f("click",function(){w(e);let s=C(2);return T(s.addCashPayment())}),o(2,"Cash"),n(),a(3,"button",53),f("click",function(){w(e);let s=C(2);return T(s.addMpesaPayment())}),o(4,"Mpesa"),n()()}}function rt(t,i){t&1&&(a(0,"th",49),o(1,"Date"),n())}function lt(t,i){if(t&1&&(a(0,"td",50),o(1),p(2,"date"),n()),t&2){let e=i.$implicit;r(),_(u(2,1,e.timestamp,"dd/MM/yyyy hh:mm a"))}}function mt(t,i){t&1&&(a(0,"th",49),o(1,"Method"),n())}function st(t,i){if(t&1&&(a(0,"td",50),o(1),n()),t&2){let e=i.$implicit;r(),_(e.method)}}function dt(t,i){t&1&&(a(0,"th",49),o(1,"Amount"),n())}function ct(t,i){if(t&1&&(a(0,"td",50),o(1),p(2,"currency"),n()),t&2){let e=i.$implicit;r(),_(u(2,1,e.amount,"KES "))}}function pt(t,i){t&1&&(a(0,"th",49),o(1,"Status"),n())}function ut(t,i){if(t&1&&(a(0,"td",50),o(1),n()),t&2){let e=i.$implicit;r(),_(e.status)}}function ft(t,i){t&1&&g(0,"th",49)}function _t(t,i){if(t&1){let e=R();a(0,"button",55),f("click",function(){w(e);let s=C().$implicit,oe=C(2);return T(oe.refundPayment(s.paymentId))}),a(1,"mat-icon"),o(2,"undo"),n()()}}function vt(t,i){if(t&1&&(a(0,"td",50),d(1,_t,3,0,"button",54),n()),t&2){let e=i.$implicit;r(),m("ngIf",e.status==="SUCCESS")}}function gt(t,i){t&1&&g(0,"tr",51)}function Ct(t,i){t&1&&g(0,"tr",52)}function yt(t,i){if(t&1&&(a(0,"button",56),o(1," Receipt "),n()),t&2){let e=C(2);m("routerLink",de(1,Le,e.sale.id))}}function xt(t,i){t&1&&(a(0,"button",57),o(1," New Sale "),n())}function St(t,i){if(t&1){let e=R();a(0,"button",58),f("click",function(){w(e);let s=C(2);return T(s.cancelSale())}),o(1," Cancel "),n()}}function bt(t,i){if(t&1){let e=R();a(0,"button",59),f("click",function(){w(e);let s=C(2);return T(s.refundSale())}),o(1," Refund "),n()}}function ht(t,i){if(t&1&&(a(0,"div",1)(1,"div",2)(2,"div")(3,"h2",3),o(4),p(5,"slice"),n(),a(6,"p",4),o(7),p(8,"date"),n()(),a(9,"mat-chip",5),o(10),n()(),d(11,Ue,15,3,"div",6),a(12,"div",7)(13,"div",8)(14,"div",9),o(15,"Total"),n(),a(16,"div",10),o(17),p(18,"currency"),n()(),a(19,"div",8)(20,"div",9),o(21,"Paid"),n(),a(22,"div",11),o(23),p(24,"currency"),n()(),a(25,"div",8)(26,"div",9),o(27,"Balance"),n(),a(28,"div",10),o(29),p(30,"currency"),n()()(),a(31,"div",12)(32,"table",13),y(33,14),d(34,Xe,2,0,"th",15)(35,qe,2,1,"td",16),x(),y(36,17),d(37,Qe,2,0,"th",15)(38,Je,3,5,"td",16),x(),y(39,18),d(40,We,2,0,"th",15)(41,Ye,2,1,"td",16),x(),y(42,19),d(43,Ze,2,0,"th",15)(44,et,3,4,"td",16),x(),y(45,20),d(46,tt,2,0,"th",15)(47,it,3,4,"td",16),x(),d(48,nt,1,0,"tr",21)(49,at,1,0,"tr",22),n()(),a(50,"div",23)(51,"div",24)(52,"h3",25),o(53,"Payments"),n(),d(54,ot,5,0,"div",26),n(),a(55,"table",13),y(56,27),d(57,rt,2,0,"th",15)(58,lt,3,4,"td",16),x(),y(59,28),d(60,mt,2,0,"th",15)(61,st,2,1,"td",16),x(),y(62,29),d(63,dt,2,0,"th",15)(64,ct,3,4,"td",16),x(),y(65,30),d(66,pt,2,0,"th",15)(67,ut,2,1,"td",16),x(),y(68,31),d(69,ft,1,0,"th",15)(70,vt,2,1,"td",16),x(),d(71,gt,1,0,"tr",21)(72,Ct,1,0,"tr",22),n()(),a(73,"div",32)(74,"div",33),d(75,yt,2,3,"button",34)(76,xt,2,0,"button",35),n(),a(77,"div",33),d(78,St,2,0,"button",36)(79,bt,2,0,"button",37),n()()()),t&2){let e=C();r(4),v(" Sale ",Z(5,22,e.sale.receiptNo,0,8)," "),r(3),se(" ",u(8,26,e.sale.createdAt,"dd/MM/yyyy HH:mm")," \xB7 ",e.sale.createdBy," "),r(2),m("color",e.sale.status==="COMPLETED"?"primary":"default"),r(),v(" ",e.sale.status," "),r(),m("ngIf",e.sale.customer),r(6),v(" ",u(18,29,e.sale.totalAmount,"KES ")," "),r(6),v(" ",u(24,32,e.paid(),"KES ")," "),r(5),me("text-warn",e.balance()>0),r(),v(" ",u(30,35,e.balance(),"KES ")," "),r(3),m("dataSource",e.sale.items),r(16),m("matHeaderRowDef",e.lineColumns),r(),m("matRowDefColumns",e.lineColumns),r(5),m("ngIf",e.canPay()),r(),m("dataSource",e.sale.payments),r(16),m("matHeaderRowDef",e.paymentColumns),r(),m("matRowDefColumns",e.paymentColumns),r(3),m("ngIf",e.sale.status==="COMPLETED"),r(),m("ngIf",e.sale.status==="COMPLETED"),r(2),m("ngIf",e.sale.status==="CREATED"),r(),m("ngIf",e.sale.status==="COMPLETED")}}var He=class t{constructor(i,e,l,s){this.route=i;this.salesService=e;this.paymentsService=l;this.dialog=s}sale;loading=!1;lineColumns=["product","branch","qty","price","total"];paymentColumns=["date","method","amount","status","actions"];ngOnInit(){this.route.paramMap.subscribe(i=>{let e=i.get("id");this.salesService.get(e).subscribe(l=>this.sale=l),this.load(e)})}load(i){this.loading=!0,this.salesService.get(i).subscribe({next:e=>{this.sale=e,this.loading=!1},error:()=>this.loading=!1})}paid(){return(this.sale?.payments||[]).filter(i=>i.status==="SUCCESS").reduce((i,e)=>i+Number(e.amount),0)}balance(){return Number(this.sale?.totalAmount||0)-this.paid()}canPay(){return this.sale?.status==="CREATED"&&this.balance()>0}addCashPayment(){this.dialog.open(J,{width:"420px",data:{sale:this.sale}}).afterClosed().subscribe(i=>i&&this.reload())}addMpesaPayment(){this.dialog.open(Y,{width:"420px",data:{sale:this.sale}}).afterClosed().subscribe(i=>i&&this.reload())}refundSale(){confirm("Refund this sale?")&&this.salesService.refund(this.sale.id).subscribe(()=>this.reload())}cancelSale(){confirm("Cancel this sale?")&&this.salesService.cancel(this.sale.id).subscribe(()=>this.reload())}refundPayment(i){confirm("Refund this payment?")&&this.paymentsService.refund(i).subscribe(()=>{this.reload()})}reload(){this.load(this.sale.id)}static \u0275fac=function(e){return new(e||t)(c(ve),c(De),c(P),c(L))};static \u0275cmp=b({type:t,selectors:[["app-sale-details"]],decls:1,vars:1,consts:[["class","flex flex-col gap-4",4,"ngIf"],[1,"flex","flex-col","gap-4"],[1,"bg-[var(--surface)]","p-4","rounded","shadow","flex","justify-between","items-center"],[1,"text-xl","font-semibold"],[1,"text-sm","text-[var(--text-secondary)]"],["selected","",1,"uppercase","tracking-wide","text-xs",3,"color"],["class","bg-[var(--surface)] rounded-lg p-4 shadow-sm relative",4,"ngIf"],[1,"grid","grid-cols-3","gap-4"],[1,"stat-card"],[1,"label"],[1,"value","text-lg","font-semibold"],[1,"value","text-lg","font-semibold","text-success"],[1,"bg-[var(--surface)]","rounded","shadow"],["mat-table","",3,"dataSource"],["matColumnDef","product"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","branch"],["matColumnDef","qty"],["matColumnDef","price"],["matColumnDef","total"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"bg-[var(--surface)]","rounded","shadow","p-4"],[1,"flex","justify-between","mb-2"],[1,"font-semibold"],["class","flex gap-2",4,"ngIf"],["matColumnDef","date"],["matColumnDef","method"],["matColumnDef","amount"],["matColumnDef","status"],["matColumnDef","actions"],[1,"flex","justify-between","items-center","mt-4"],[1,"flex","gap-2"],["mat-stroked-button","",3,"routerLink",4,"ngIf"],["mat-flat-button","","color","primary","routerLink","/sales/new",4,"ngIf"],["mat-stroked-button","","color","warn",3,"click",4,"ngIf"],["mat-flat-button","","color","warn",3,"click",4,"ngIf"],[1,"bg-[var(--surface)]","rounded-lg","p-4","shadow-sm","relative"],[1,"absolute","left-0","top-0","h-full","w-1","bg-primary","rounded-l"],[1,"flex","items-center","justify-between","mb-3","pl-2"],[1,"text-xs","font-semibold","uppercase","tracking-wider","text-[var(--text-secondary)]"],[1,"text-[var(--text-secondary)]"],[1,"grid","grid-cols-2","gap-x-6","gap-y-3","text-sm","pl-2"],[1,"col-span-2"],[1,"value","font-semibold"],[4,"ngIf"],[1,"value","tabular-nums"],[1,"value","truncate"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""],["mat-stroked-button","",3,"click"],["mat-icon-button","","matTooltip","Refund",3,"click",4,"ngIf"],["mat-icon-button","","matTooltip","Refund",3,"click"],["mat-stroked-button","",3,"routerLink"],["mat-flat-button","","color","primary","routerLink","/sales/new"],["mat-stroked-button","","color","warn",3,"click"],["mat-flat-button","","color","warn",3,"click"]],template:function(e,l){e&1&&d(0,ht,80,38,"div",0),e&2&&m("ngIf",l.sale)},dependencies:[M,ce,ue,h,pe,Be,Ee,Ie,Oe,we,Pe,Re,Te,ke,Ae,Ne,E,D,he,xe,ye,je,Fe,Me,be,Se,Ce,ge],styles:[".stat-card[_ngcontent-%COMP%]{background:var(--surface);padding:1rem;border-radius:8px;border:none;box-shadow:0 1px 2px #0000004d;text-align:center}body.dark[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]{box-shadow:0 1px 2px #0006}.label[_ngcontent-%COMP%]{font-size:.75rem;text-transform:uppercase;letter-spacing:.04em;color:var(--text-secondary)}.value[_ngcontent-%COMP%]{font-size:.9rem;color:var(--text-primary)}"]})};export{He as SaleDetailsComponent};
