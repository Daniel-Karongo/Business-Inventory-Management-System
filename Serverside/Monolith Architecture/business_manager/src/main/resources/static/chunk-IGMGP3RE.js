import{a as k}from"./chunk-U4QEVBHU.js";import"./chunk-U5YT4ZGI.js";import{a as E}from"./chunk-22FAI265.js";import{a as D}from"./chunk-7QUTMXBD.js";import"./chunk-4DCSEN5G.js";import"./chunk-MS4AQ6UA.js";import"./chunk-H37LQHOQ.js";import"./chunk-DF6WYVPK.js";import"./chunk-MJONFXFY.js";import{a as I}from"./chunk-BIVTK5YB.js";import"./chunk-ZFWGKVXC.js";import"./chunk-3RK6DDJD.js";import"./chunk-CONPK5ZF.js";import"./chunk-3ZV2DC5Q.js";import"./chunk-SGYCFQGT.js";import"./chunk-Z2GGFO6C.js";import"./chunk-75T6YVBZ.js";import"./chunk-TENNXE3V.js";import"./chunk-2X53NFZU.js";import{b as S,d as x}from"./chunk-VUFC7WNX.js";import"./chunk-CDHEWSLI.js";import"./chunk-5DTMLZHP.js";import{Ib as a,Jb as n,Ob as C,Qb as v,Rb as p,T as d,Uc as _,ac as h,bb as u,bd as b,f as m,gb as r,ma as l,na as g,nb as y,sb as f,zb as s}from"./chunk-3DYKM6ZU.js";import"./chunk-FJYW2LMB.js";function R(i,t){if(i&1){let e=C();a(0,"app-category-form",3),v("submitted",function(c){l(e);let O=p();return g(O.handleSubmit(c))}),n()}if(i&2){let e=p();s("initialData",e.category)}}var M=class i{constructor(t,e,o,c){this.route=t;this.router=e;this.service=o;this.snackbar=c}destroy$=new m;category=null;loading=!0;error=null;ngOnInit(){let t=Number(this.route.snapshot.paramMap.get("id"));this.service.getById(t,"tree",!1).pipe(d(this.destroy$)).subscribe({next:e=>{this.category=e,this.loading=!1},error:()=>{this.error="Failed to load category.",this.loading=!1}})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}handleSubmit(t){this.category&&this.service.update(this.category.id,t.payload).subscribe({next:()=>{t.done(),this.snackbar.open("Category updated","Close",{duration:3e3}),this.router.navigate(["/categories",this.category.id])},error:e=>{t.done();let o=e?.error?.message||"Failed to update category";this.snackbar.open(o,"Close",{duration:4e3})}})}static \u0275fac=function(e){return new(e||i)(r(S),r(x),r(E),r(I))};static \u0275cmp=y({type:i,selectors:[["app-category-edit"]],decls:6,vars:1,consts:[["page-header",""],["page-content",""],[3,"initialData","submitted",4,"ngIf"],[3,"submitted","initialData"]],template:function(e,o){e&1&&(a(0,"app-page-shell")(1,"div",0)(2,"h2"),h(3,"Edit Category"),n()(),a(4,"div",1),f(5,R,1,1,"app-category-form",2),n()()),e&2&&(u(5),s("ngIf",!o.loading))},dependencies:[b,_,D,k],encapsulation:2})};export{M as CategoryEditComponent};
