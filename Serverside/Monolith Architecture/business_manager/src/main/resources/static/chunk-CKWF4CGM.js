import{a as R}from"./chunk-TM2CIIHB.js";import{g as I,h as E}from"./chunk-A6LP6NU3.js";import"./chunk-7XXZ3FER.js";import{b as h,h as b}from"./chunk-PBEYJMJD.js";import"./chunk-LMLMO6HS.js";import"./chunk-5DTMLZHP.js";import{$c as P,Ib as i,Jb as t,Kb as g,Qb as _,Rb as f,Rc as y,Sc as S,Wc as M,Zc as O,ac as n,bb as a,bc as m,cc as l,dc as C,gb as u,nb as x,nc as s,pc as d,sb as c,zb as p}from"./chunk-IL4QWM46.js";import"./chunk-FJYW2LMB.js";function T(o,r){o&1&&(i(0,"div",4),n(1,` Loading receipt\u2026
`),t())}function B(o,r){if(o&1&&(i(0,"div",18)(1,"div",19),n(2),t(),i(3,"div",20),n(4),s(5,"currency"),t()()),o&2){let e=r.$implicit;a(2),C(" ",e.productName," \xD7 ",e.quantity," "),a(2),l(" ",d(5,3,e.lineTotal,"KES")," ")}}function F(o,r){if(o&1&&(i(0,"div",21)(1,"div"),n(2),t(),i(3,"div"),n(4),s(5,"currency"),t()()),o&2){let e=r.$implicit;a(2),m(e.method),a(2),m(d(5,2,e.amount,"KES"))}}function N(o,r){if(o&1&&(i(0,"div",25),n(1),t()),o&2){let e=f(3);a(),l(" ",e.sale.customer.phoneNumbers[0]," ")}}function z(o,r){if(o&1&&(i(0,"div",22)(1,"div",14),n(2,"Customer"),t(),i(3,"div",23),n(4),t(),c(5,N,2,1,"div",24),t()),o&2){let e=f(2);a(4),l(" ",e.sale.customer.name," "),a(),p("ngIf",e.sale.customer.phoneNumbers==null?null:e.sale.customer.phoneNumbers.length)}}function D(o,r){if(o&1&&(i(0,"div",5)(1,"div",6)(2,"div",7),n(3,"Business Manager"),t(),i(4,"div",8),n(5,"Official Receipt"),t()(),i(6,"div",9)(7,"div"),n(8,"Sale #: "),i(9,"strong"),n(10),t()(),i(11,"div"),n(12),s(13,"date"),t(),i(14,"div"),n(15),t()(),g(16,"hr"),i(17,"div",10),c(18,B,6,6,"div",11),t(),g(19,"hr"),i(20,"div",12)(21,"div"),n(22,"Total"),t(),i(23,"div"),n(24),s(25,"currency"),t()(),i(26,"div",13)(27,"div",14),n(28,"Payments"),t(),c(29,F,6,5,"div",15),t(),c(30,z,6,2,"div",16),g(31,"hr"),i(32,"div",17),n(33," Thank you for your business "),t()()),o&2){let e=f();a(10),m(e.sale.id),a(2),l("Date: ",d(13,7,e.sale.createdAt,"short"),""),a(3),l("Served by: ",e.sale.createdBy,""),a(3),p("ngForOf",e.sale.items),a(6),m(d(25,10,e.sale.totalAmount,"KES")),a(5),p("ngForOf",e.sale.payments),a(),p("ngIf",e.sale.customer)}}var w=class o{constructor(r,e){this.route=r;this.salesService=e}sale;loading=!0;ngOnInit(){let r=this.route.snapshot.paramMap.get("id");r&&this.salesService.get(r).subscribe(e=>{this.sale=e,this.loading=!1,setTimeout(()=>window.print(),300)})}print(){window.print()}static \u0275fac=function(e){return new(e||o)(u(h),u(R))};static \u0275cmp=x({type:o,selectors:[["app-sale-receipt"]],inputs:{sale:"sale"},decls:5,vars:2,consts:[["class","receipt-loading",4,"ngIf"],["id","print-area","class","receipt",4,"ngIf"],[1,"receipt-actions","no-print"],["mat-flat-button","","color","primary",3,"click"],[1,"receipt-loading"],["id","print-area",1,"receipt"],[1,"receipt-header"],[1,"receipt-title"],[1,"receipt-subtitle"],[1,"receipt-meta"],[1,"receipt-items"],["class","receipt-item",4,"ngFor","ngForOf"],[1,"receipt-total"],[1,"receipt-payments"],[1,"receipt-section-title"],["class","receipt-payment",4,"ngFor","ngForOf"],["class","receipt-customer",4,"ngIf"],[1,"receipt-footer"],[1,"receipt-item"],[1,"item-left"],[1,"item-right"],[1,"receipt-payment"],[1,"receipt-customer"],[1,"receipt-line"],["class","receipt-line muted",4,"ngIf"],[1,"receipt-line","muted"]],template:function(e,v){e&1&&(c(0,T,2,0,"div",0)(1,D,34,13,"div",1),i(2,"div",2)(3,"button",3),_("click",function(){return v.print()}),n(4," Print Receipt "),t()()),e&2&&(p("ngIf",v.loading),a(),p("ngIf",!v.loading))},dependencies:[P,y,S,O,M,E,I,b],styles:["[_nghost-%COMP%]{display:block;padding:12px}.receipt[_ngcontent-%COMP%]{max-width:300px;margin:0 auto;font-family:monospace;font-size:.85rem;color:#000}.receipt-loading[_ngcontent-%COMP%]{padding:24px;text-align:center}.receipt-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:8px}.receipt-title[_ngcontent-%COMP%]{font-weight:700;font-size:1rem}.receipt-subtitle[_ngcontent-%COMP%]{font-size:.8rem}.receipt-meta[_ngcontent-%COMP%]{font-size:.8rem;margin-bottom:6px}hr[_ngcontent-%COMP%]{border:none;border-top:1px dashed #000;margin:6px 0}.receipt-items[_ngcontent-%COMP%]{margin-top:6px}.receipt-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:2px}.item-left[_ngcontent-%COMP%]{flex:1}.item-right[_ngcontent-%COMP%]{text-align:right;white-space:nowrap}.receipt-total[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-weight:700;margin-top:4px}.receipt-payments[_ngcontent-%COMP%]{margin-top:6px}.receipt-payment[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.receipt-customer[_ngcontent-%COMP%]{margin-top:6px}.receipt-section-title[_ngcontent-%COMP%]{font-weight:700;text-transform:uppercase;font-size:.7rem;margin-bottom:2px}.receipt-line[_ngcontent-%COMP%]{font-size:.85rem}.muted[_ngcontent-%COMP%]{opacity:.8}.receipt-footer[_ngcontent-%COMP%]{text-align:center;margin-top:8px;font-size:.8rem}.receipt-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:16px}@media print{body[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{visibility:hidden}#print-area[_ngcontent-%COMP%], #print-area[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{visibility:visible}#print-area[_ngcontent-%COMP%]{position:absolute;left:0;top:0;width:100%}.no-print[_ngcontent-%COMP%]{display:none!important}}"]})};export{w as SaleReceiptComponent};
