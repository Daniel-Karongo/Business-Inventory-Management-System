import{a as H}from"./chunk-KCBQSHO2.js";import{a as Ue,b as $e}from"./chunk-RI2EOWWF.js";import{a as Oe}from"./chunk-X5MK7W46.js";import{a as qe}from"./chunk-MS5I24WJ.js";import{a as W}from"./chunk-RUIAFSGF.js";import"./chunk-MS4AQ6UA.js";import{a as U,b as $}from"./chunk-H37LQHOQ.js";import{d as j}from"./chunk-DF6WYVPK.js";import"./chunk-MJONFXFY.js";import{a as Ge,b as We}from"./chunk-BIVTK5YB.js";import{c as Ye,d as Xe}from"./chunk-ZFWGKVXC.js";import"./chunk-3RK6DDJD.js";import{a as x}from"./chunk-CONPK5ZF.js";import{b as Y,h as X}from"./chunk-3ZV2DC5Q.js";import"./chunk-SGYCFQGT.js";import{c as Pe,d as Le,e as Re,h as N,l as q,n as je,w as G}from"./chunk-Z2GGFO6C.js";import"./chunk-75T6YVBZ.js";import{a as Ve,c as ze}from"./chunk-TENNXE3V.js";import{G as ae,k as De,m as Fe,x as Ae}from"./chunk-2X53NFZU.js";import{a as Ne}from"./chunk-5DTMLZHP.js";import{$b as Ce,Aa as he,Bb as T,Cb as ge,Cc as C,Dc as xe,Eb as be,Ia as ue,Ib as r,Jb as n,Kb as _,Ob as V,Pb as _e,Qb as p,Rb as g,Sb as fe,Tb as we,Tc as R,Uc as Ee,Wb as ve,Xb as ye,Y as ne,Yb as ke,Z as F,_ as re,_c as Be,aa as oe,ac as d,bb as s,bc as Se,bd as I,ca as se,cc as f,da as h,dc as z,g as ce,gb as u,gc as w,hc as v,ic as y,jd as Te,kc as Me,la as de,lc as ie,ma as S,na as M,nb as b,oa as le,ob as pe,pc as P,rc as L,sb as m,ta as me,wa as te,yb as A,zb as l,zc as Ie}from"./chunk-3DYKM6ZU.js";import"./chunk-FJYW2LMB.js";var E=class c{constructor(t){this.http=t}base=`${Ne.apiUrl}/budgets`;get(t,e){return this.http.get(this.base,{params:{branchId:t??"",fiscalYear:e}})}create(t,e){return this.http.post(this.base,null,{params:{branchId:t??"",fiscalYear:e}})}updateLine(t,e,i,a){return this.http.post(`${this.base}/${t}/lines`,null,{params:{accountId:e,month:i,amount:a}})}branchVariance(t,e,i,a){if(!t)throw new Error("branchId is required for branch variance");return this.http.get(`${this.base}/variance`,{params:{branchId:t,year:e,month:i,accountId:a}})}corporateVariance(t,e,i){return this.http.get(`${this.base}/consolidated`,{params:{year:t,month:e,accountId:i}})}compareBranches(t,e,i){return this.http.get(`${this.base}/compare`,{params:{year:t,month:e,accountId:i}})}static \u0275fac=function(e){return new(e||c)(se(Te))};static \u0275prov=F({token:c,factory:c.\u0275fac,providedIn:"root"})};var B=class c{auth=h(W);STORAGE_KEY="active_branch_id";branchSubject=new ce(null);branch$=this.branchSubject.asObservable();constructor(){let t=localStorage.getItem(this.STORAGE_KEY),e=this.auth.getSnapshot()?.branchId??null;this.branchSubject.next(t??e)}get currentBranch(){return this.branchSubject.value}setBranch(t){this.auth.getSnapshot()?.role!=="EMPLOYEE"&&(t?localStorage.setItem(this.STORAGE_KEY,t):localStorage.removeItem(this.STORAGE_KEY),this.branchSubject.next(t))}resetToAuthBranch(){let t=this.auth.getSnapshot()?.branchId??null;this.branchSubject.next(t)}static \u0275fac=function(e){return new(e||c)};static \u0275prov=F({token:c,factory:c.\u0275fac,providedIn:"root"})};function ct(c,t){if(c&1&&(r(0,"mat-option",4),d(1),n()),c&2){let e=t.$implicit;l("value",e.id),s(),f(" ",e.name," ")}}function nt(c,t){if(c&1&&(r(0,"th"),d(1),n()),c&2){let e=t.$implicit;s(),Se(e)}}function rt(c,t){if(c&1){let e=V();r(0,"td")(1,"input",10),y("ngModelChange",function(a){let o=S(e).index,k=g().$implicit,D=g();return v(D.data[k.id][o],a)||(D.data[k.id][o]=a),M(a)}),p("blur",function(){let a=S(e).index,o=g().$implicit,k=g();return M(k.save(o.id,a))}),n()()}if(c&2){let e=t.index,i=g().$implicit,a=g();s(),w("ngModel",a.data[i.id][e])}}function ot(c,t){if(c&1&&(r(0,"tr")(1,"td",9),d(2),n(),m(3,rt,2,1,"td",8),n()),c&2){let e=t.$implicit,i=g();s(2),z(" ",e.code," \u2014 ",e.name," "),s(),l("ngForOf",i.months)}}var Q=class c{constructor(t,e,i,a,o,k){this.budgetService=t;this.accountsService=e;this.branchService=i;this.branchContext=a;this.snackbar=o;this.auth=k}fiscalYear=new Date().getFullYear();selectedBranchId=null;months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];accounts=[];branches=[];budgetId;data={};branchSub;ngOnInit(){this.accountsService.list().subscribe(t=>{this.accounts=t,this.initializeGrid()}),this.branchService.getAll(!1).subscribe(t=>{this.branches=t}),this.branchSub=this.branchContext.branch$.subscribe(t=>{this.selectedBranchId=t,this.loadBudget()}),this.loadBudget()}ngOnDestroy(){this.branchSub?.unsubscribe()}changeBranch(t){this.branchContext.setBranch(t)}initializeGrid(){this.accounts.forEach(t=>{this.data[t.id]=new Array(12).fill(0)})}loadBudget(){this.budgetService.get(this.selectedBranchId,this.fiscalYear).subscribe({next:t=>{if(!t){this.createBudget();return}this.budgetId=t.id,t.lines?.forEach(e=>{this.data[e.accountId]=e.months})},error:()=>this.createBudget()})}createBudget(){this.budgetService.create(this.selectedBranchId,this.fiscalYear).subscribe(t=>{this.budgetId=t.id})}save(t,e){let i=this.data[t][e];this.budgetService.updateLine(this.budgetId,t,e+1,i).subscribe({next:()=>this.snackbar.open("Saved","Close",{duration:800})})}static \u0275fac=function(e){return new(e||c)(u(E),u(H),u(qe),u(B),u(Ge),u(W))};static \u0275cmp=b({type:c,selectors:[["app-budget-editor"]],decls:21,vars:7,consts:[[1,"controls","flex","gap-4","mb-4","flex-wrap"],["appearance","fill"],["matInput","","type","number",3,"ngModelChange","ngModel"],[3,"selectionChange","disabled","value"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"table-wrapper"],[1,"budget-grid"],[4,"ngFor","ngForOf"],[1,"account-cell"],["type","number",3,"ngModelChange","blur","ngModel"]],template:function(e,i){if(e&1&&(r(0,"div",0)(1,"mat-form-field",1)(2,"mat-label"),d(3,"Fiscal Year"),n(),r(4,"input",2),y("ngModelChange",function(o){return v(i.fiscalYear,o)||(i.fiscalYear=o),o}),n()(),r(5,"mat-form-field",1)(6,"mat-label"),d(7,"Branch"),n(),r(8,"mat-select",3),p("selectionChange",function(o){return i.changeBranch(o.value)}),r(9,"mat-option",4),d(10,"Global"),n(),m(11,ct,2,2,"mat-option",5),n()()(),r(12,"div",6)(13,"table",7)(14,"thead")(15,"tr")(16,"th"),d(17,"Account"),n(),m(18,nt,2,1,"th",8),n()(),r(19,"tbody"),m(20,ot,4,3,"tr",8),n()()()),e&2){let a;s(4),w("ngModel",i.fiscalYear),s(4),l("disabled",((a=i.auth.getSnapshot())==null?null:a.role)==="EMPLOYEE")("value",i.selectedBranchId),s(),l("value",null),s(2),l("ngForOf",i.branches),s(7),l("ngForOf",i.months),s(2),l("ngForOf",i.accounts)}},dependencies:[I,R,G,Le,je,N,q,$,X,Y,U,j,We,x,Xe,Ye],styles:[".table-wrapper[_ngcontent-%COMP%]{overflow-x:auto}.budget-grid[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;min-width:1200px}.budget-grid[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .budget-grid[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid var(--border);padding:6px;text-align:right}.budget-grid[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child, .budget-grid[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{text-align:left;min-width:220px}.account-cell[_ngcontent-%COMP%]{font-weight:600}input[_ngcontent-%COMP%]{width:100%;border:none;background:transparent;text-align:right}"]})};var K=class c{static \u0275fac=function(e){return new(e||c)};static \u0275cmp=b({type:c,selectors:[["app-budget-dashboard"]],decls:8,vars:0,consts:[[1,"page-container","p-4"],[1,"page-header","mb-6"],[1,"text-xl","font-semibold"],[1,"text-sm","text-[var(--text-secondary)]"],[1,"p-4"]],template:function(e,i){e&1&&(r(0,"div",0)(1,"div",1)(2,"h2",2),d(3,"Budget Management"),n(),r(4,"div",3),d(5," Excel-style monthly budget editor "),n()(),r(6,"mat-card",4),_(7,"app-budget-editor"),n()())},dependencies:[I,$e,Ue,Q,x],styles:[".page-container[_ngcontent-%COMP%]{max-width:1400px;margin:auto}"]})};var st=["switch"],dt=["*"];function lt(c,t){c&1&&(r(0,"span",10),le(),r(1,"svg",12),_(2,"path",13),n(),r(3,"svg",14),_(4,"path",15),n()())}var mt=new oe("mat-slide-toggle-default-options",{providedIn:"root",factory:()=>({disableToggleValue:!1,hideIcon:!1,disabledInteractive:!1})}),ht={provide:Pe,useExisting:ne(()=>Z),multi:!0},J=class{source;checked;constructor(t,e){this.source=t,this.checked=e}},Z=(()=>{class c{_elementRef=h(he);_focusMonitor=h(De);_changeDetectorRef=h(Ie);defaults=h(mt);_onChange=e=>{};_onTouched=()=>{};_validatorOnChange=()=>{};_uniqueId;_checked=!1;_createChangeEvent(e){return new J(this,e)}_labelId;get buttonId(){return`${this.id||this._uniqueId}-button`}_switchElement;focus(){this._switchElement.nativeElement.focus()}_noopAnimations;_focused;name=null;id;labelPosition="after";ariaLabel=null;ariaLabelledby=null;ariaDescribedby;required;color;disabled=!1;disableRipple=!1;tabIndex=0;get checked(){return this._checked}set checked(e){this._checked=e,this._changeDetectorRef.markForCheck()}hideIcon;disabledInteractive;change=new te;toggleChange=new te;get inputId(){return`${this.id||this._uniqueId}-input`}constructor(){h(Fe).load(Ve);let e=h(new me("tabindex"),{optional:!0}),i=this.defaults,a=h(ue,{optional:!0});this.tabIndex=e==null?0:parseInt(e)||0,this.color=i.color||"accent",this._noopAnimations=a==="NoopAnimations",this.id=this._uniqueId=h(Ae).getId("mat-mdc-slide-toggle-"),this.hideIcon=i.hideIcon??!1,this.disabledInteractive=i.disabledInteractive??!1,this._labelId=this._uniqueId+"-label"}ngAfterContentInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(e=>{e==="keyboard"||e==="program"?(this._focused=!0,this._changeDetectorRef.markForCheck()):e||Promise.resolve().then(()=>{this._focused=!1,this._onTouched(),this._changeDetectorRef.markForCheck()})})}ngOnChanges(e){e.required&&this._validatorOnChange()}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}writeValue(e){this.checked=!!e}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}validate(e){return this.required&&e.value!==!0?{required:!0}:null}registerOnValidatorChange(e){this._validatorOnChange=e}setDisabledState(e){this.disabled=e,this._changeDetectorRef.markForCheck()}toggle(){this.checked=!this.checked,this._onChange(this.checked)}_emitChangeEvent(){this._onChange(this.checked),this.change.emit(this._createChangeEvent(this.checked))}_handleClick(){this.disabled||(this.toggleChange.emit(),this.defaults.disableToggleValue||(this.checked=!this.checked,this._onChange(this.checked),this.change.emit(new J(this,this.checked))))}_getAriaLabelledBy(){return this.ariaLabelledby?this.ariaLabelledby:this.ariaLabel?null:this._labelId}static \u0275fac=function(i){return new(i||c)};static \u0275cmp=b({type:c,selectors:[["mat-slide-toggle"]],viewQuery:function(i,a){if(i&1&&ve(st,5),i&2){let o;ye(o=ke())&&(a._switchElement=o.first)}},hostAttrs:[1,"mat-mdc-slide-toggle"],hostVars:13,hostBindings:function(i,a){i&2&&(_e("id",a.id),A("tabindex",null)("aria-label",null)("name",null)("aria-labelledby",null),ge(a.color?"mat-"+a.color:""),T("mat-mdc-slide-toggle-focused",a._focused)("mat-mdc-slide-toggle-checked",a.checked)("_mat-animation-noopable",a._noopAnimations))},inputs:{name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[0,"aria-describedby","ariaDescribedby"],required:[2,"required","required",C],color:"color",disabled:[2,"disabled","disabled",C],disableRipple:[2,"disableRipple","disableRipple",C],tabIndex:[2,"tabIndex","tabIndex",e=>e==null?0:xe(e)],checked:[2,"checked","checked",C],hideIcon:[2,"hideIcon","hideIcon",C],disabledInteractive:[2,"disabledInteractive","disabledInteractive",C]},outputs:{change:"change",toggleChange:"toggleChange"},exportAs:["matSlideToggle"],features:[Me([ht,{provide:Re,useExisting:c,multi:!0}]),de],ngContentSelectors:dt,decls:13,vars:27,consts:[["switch",""],["mat-internal-form-field","",3,"labelPosition"],["role","switch","type","button",1,"mdc-switch",3,"click","tabIndex","disabled"],[1,"mdc-switch__track"],[1,"mdc-switch__handle-track"],[1,"mdc-switch__handle"],[1,"mdc-switch__shadow"],[1,"mdc-elevation-overlay"],[1,"mdc-switch__ripple"],["mat-ripple","",1,"mat-mdc-slide-toggle-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered"],[1,"mdc-switch__icons"],[1,"mdc-label",3,"click","for"],["viewBox","0 0 24 24","aria-hidden","true",1,"mdc-switch__icon","mdc-switch__icon--on"],["d","M19.69,5.23L8.96,15.96l-4.23-4.23L2.96,13.5l6,6L21.46,7L19.69,5.23z"],["viewBox","0 0 24 24","aria-hidden","true",1,"mdc-switch__icon","mdc-switch__icon--off"],["d","M20 13H4v-2h16v2z"]],template:function(i,a){if(i&1){let o=V();fe(),r(0,"div",1)(1,"button",2,0),p("click",function(){return S(o),M(a._handleClick())}),_(3,"span",3),r(4,"span",4)(5,"span",5)(6,"span",6),_(7,"span",7),n(),r(8,"span",8),_(9,"span",9),n(),m(10,lt,5,0,"span",10),n()()(),r(11,"label",11),p("click",function(D){return S(o),M(D.stopPropagation())}),we(12),n()()}if(i&2){let o=Ce(2);l("labelPosition",a.labelPosition),s(),T("mdc-switch--selected",a.checked)("mdc-switch--unselected",!a.checked)("mdc-switch--checked",a.checked)("mdc-switch--disabled",a.disabled)("mat-mdc-slide-toggle-disabled-interactive",a.disabledInteractive),l("tabIndex",a.disabled&&!a.disabledInteractive?-1:a.tabIndex)("disabled",a.disabled&&!a.disabledInteractive),A("id",a.buttonId)("name",a.name)("aria-label",a.ariaLabel)("aria-labelledby",a._getAriaLabelledBy())("aria-describedby",a.ariaDescribedby)("aria-required",a.required||null)("aria-checked",a.checked)("aria-disabled",a.disabled&&a.disabledInteractive?"true":null),s(8),l("matRippleTrigger",o)("matRippleDisabled",a.disableRipple||a.disabled)("matRippleCentered",!0),s(),be(a.hideIcon?-1:10),s(),l("for",a.buttonId),A("id",a._labelId)}},dependencies:[ze,Oe],styles:[`.mdc-switch{align-items:center;background:none;border:none;cursor:pointer;display:inline-flex;flex-shrink:0;margin:0;outline:none;overflow:visible;padding:0;position:relative;width:var(--mdc-switch-track-width, 52px)}.mdc-switch.mdc-switch--disabled{cursor:default;pointer-events:none}.mdc-switch.mat-mdc-slide-toggle-disabled-interactive{pointer-events:auto}.mdc-switch__track{overflow:hidden;position:relative;width:100%;height:var(--mdc-switch-track-height, 32px);border-radius:var(--mdc-switch-track-shape, var(--mat-sys-corner-full))}.mdc-switch--disabled.mdc-switch .mdc-switch__track{opacity:var(--mdc-switch-disabled-track-opacity, 0.12)}.mdc-switch__track::before,.mdc-switch__track::after{border:1px solid rgba(0,0,0,0);border-radius:inherit;box-sizing:border-box;content:"";height:100%;left:0;position:absolute;width:100%;border-width:var(--mat-switch-track-outline-width, 2px);border-color:var(--mat-switch-track-outline-color, var(--mat-sys-outline))}.mdc-switch--selected .mdc-switch__track::before,.mdc-switch--selected .mdc-switch__track::after{border-width:var(--mat-switch-selected-track-outline-width, 2px);border-color:var(--mat-switch-selected-track-outline-color, transparent)}.mdc-switch--disabled .mdc-switch__track::before,.mdc-switch--disabled .mdc-switch__track::after{border-width:var(--mat-switch-disabled-unselected-track-outline-width, 2px);border-color:var(--mat-switch-disabled-unselected-track-outline-color, var(--mat-sys-on-surface))}@media(forced-colors: active){.mdc-switch__track{border-color:currentColor}}.mdc-switch__track::before{transition:transform 75ms 0ms cubic-bezier(0, 0, 0.2, 1);transform:translateX(0);background:var(--mdc-switch-unselected-track-color, var(--mat-sys-surface-variant))}.mdc-switch--selected .mdc-switch__track::before{transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.6, 1);transform:translateX(100%)}[dir=rtl] .mdc-switch--selected .mdc-switch--selected .mdc-switch__track::before{transform:translateX(-100%)}.mdc-switch--selected .mdc-switch__track::before{opacity:var(--mat-switch-hidden-track-opacity, 0);transition:var(--mat-switch-hidden-track-transition, opacity 75ms)}.mdc-switch--unselected .mdc-switch__track::before{opacity:var(--mat-switch-visible-track-opacity, 1);transition:var(--mat-switch-visible-track-transition, opacity 75ms)}.mdc-switch:enabled:hover:not(:focus):not(:active) .mdc-switch__track::before{background:var(--mdc-switch-unselected-hover-track-color, var(--mat-sys-surface-variant))}.mdc-switch:enabled:focus:not(:active) .mdc-switch__track::before{background:var(--mdc-switch-unselected-focus-track-color, var(--mat-sys-surface-variant))}.mdc-switch:enabled:active .mdc-switch__track::before{background:var(--mdc-switch-unselected-pressed-track-color, var(--mat-sys-surface-variant))}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:hover:not(:focus):not(:active) .mdc-switch__track::before,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:focus:not(:active) .mdc-switch__track::before,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:active .mdc-switch__track::before,.mdc-switch.mdc-switch--disabled .mdc-switch__track::before{background:var(--mdc-switch-disabled-unselected-track-color, var(--mat-sys-surface-variant))}.mdc-switch__track::after{transform:translateX(-100%);background:var(--mdc-switch-selected-track-color, var(--mat-sys-primary))}[dir=rtl] .mdc-switch__track::after{transform:translateX(100%)}.mdc-switch--selected .mdc-switch__track::after{transform:translateX(0)}.mdc-switch--selected .mdc-switch__track::after{opacity:var(--mat-switch-visible-track-opacity, 1);transition:var(--mat-switch-visible-track-transition, opacity 75ms)}.mdc-switch--unselected .mdc-switch__track::after{opacity:var(--mat-switch-hidden-track-opacity, 0);transition:var(--mat-switch-hidden-track-transition, opacity 75ms)}.mdc-switch:enabled:hover:not(:focus):not(:active) .mdc-switch__track::after{background:var(--mdc-switch-selected-hover-track-color, var(--mat-sys-primary))}.mdc-switch:enabled:focus:not(:active) .mdc-switch__track::after{background:var(--mdc-switch-selected-focus-track-color, var(--mat-sys-primary))}.mdc-switch:enabled:active .mdc-switch__track::after{background:var(--mdc-switch-selected-pressed-track-color, var(--mat-sys-primary))}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:hover:not(:focus):not(:active) .mdc-switch__track::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:focus:not(:active) .mdc-switch__track::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:active .mdc-switch__track::after,.mdc-switch.mdc-switch--disabled .mdc-switch__track::after{background:var(--mdc-switch-disabled-selected-track-color, var(--mat-sys-on-surface))}.mdc-switch__handle-track{height:100%;pointer-events:none;position:absolute;top:0;transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1);left:0;right:auto;transform:translateX(0);width:calc(100% - var(--mdc-switch-handle-width))}[dir=rtl] .mdc-switch__handle-track{left:auto;right:0}.mdc-switch--selected .mdc-switch__handle-track{transform:translateX(100%)}[dir=rtl] .mdc-switch--selected .mdc-switch__handle-track{transform:translateX(-100%)}.mdc-switch__handle{display:flex;pointer-events:auto;position:absolute;top:50%;transform:translateY(-50%);left:0;right:auto;transition:width 75ms cubic-bezier(0.4, 0, 0.2, 1),height 75ms cubic-bezier(0.4, 0, 0.2, 1),margin 75ms cubic-bezier(0.4, 0, 0.2, 1);width:var(--mdc-switch-handle-width);height:var(--mdc-switch-handle-height);border-radius:var(--mdc-switch-handle-shape, var(--mat-sys-corner-full))}[dir=rtl] .mdc-switch__handle{left:auto;right:0}.mat-mdc-slide-toggle .mdc-switch--unselected .mdc-switch__handle{width:var(--mat-switch-unselected-handle-size, 16px);height:var(--mat-switch-unselected-handle-size, 16px);margin:var(--mat-switch-unselected-handle-horizontal-margin, 0 8px)}.mat-mdc-slide-toggle .mdc-switch--unselected .mdc-switch__handle:has(.mdc-switch__icons){margin:var(--mat-switch-unselected-with-icon-handle-horizontal-margin, 0 4px)}.mat-mdc-slide-toggle .mdc-switch--selected .mdc-switch__handle{width:var(--mat-switch-selected-handle-size, 24px);height:var(--mat-switch-selected-handle-size, 24px);margin:var(--mat-switch-selected-handle-horizontal-margin, 0 24px)}.mat-mdc-slide-toggle .mdc-switch--selected .mdc-switch__handle:has(.mdc-switch__icons){margin:var(--mat-switch-selected-with-icon-handle-horizontal-margin, 0 24px)}.mat-mdc-slide-toggle .mdc-switch__handle:has(.mdc-switch__icons){width:var(--mat-switch-with-icon-handle-size, 24px);height:var(--mat-switch-with-icon-handle-size, 24px)}.mat-mdc-slide-toggle .mdc-switch:active:not(.mdc-switch--disabled) .mdc-switch__handle{width:var(--mat-switch-pressed-handle-size, 28px);height:var(--mat-switch-pressed-handle-size, 28px)}.mat-mdc-slide-toggle .mdc-switch--selected:active:not(.mdc-switch--disabled) .mdc-switch__handle{margin:var(--mat-switch-selected-pressed-handle-horizontal-margin, 0 22px)}.mat-mdc-slide-toggle .mdc-switch--unselected:active:not(.mdc-switch--disabled) .mdc-switch__handle{margin:var(--mat-switch-unselected-pressed-handle-horizontal-margin, 0 2px)}.mdc-switch--disabled.mdc-switch--selected .mdc-switch__handle::after{opacity:var(--mat-switch-disabled-selected-handle-opacity, 1)}.mdc-switch--disabled.mdc-switch--unselected .mdc-switch__handle::after{opacity:var(--mat-switch-disabled-unselected-handle-opacity, 0.38)}.mdc-switch__handle::before,.mdc-switch__handle::after{border:1px solid rgba(0,0,0,0);border-radius:inherit;box-sizing:border-box;content:"";width:100%;height:100%;left:0;position:absolute;top:0;transition:background-color 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1),border-color 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1);z-index:-1}@media(forced-colors: active){.mdc-switch__handle::before,.mdc-switch__handle::after{border-color:currentColor}}.mdc-switch--selected:enabled .mdc-switch__handle::after{background:var(--mdc-switch-selected-handle-color, var(--mat-sys-on-primary))}.mdc-switch--selected:enabled:hover:not(:focus):not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-selected-hover-handle-color, var(--mat-sys-primary-container))}.mdc-switch--selected:enabled:focus:not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-selected-focus-handle-color, var(--mat-sys-primary-container))}.mdc-switch--selected:enabled:active .mdc-switch__handle::after{background:var(--mdc-switch-selected-pressed-handle-color, var(--mat-sys-primary-container))}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled.mdc-switch--selected:hover:not(:focus):not(:active) .mdc-switch__handle::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled.mdc-switch--selected:focus:not(:active) .mdc-switch__handle::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled.mdc-switch--selected:active .mdc-switch__handle::after,.mdc-switch--selected.mdc-switch--disabled .mdc-switch__handle::after{background:var(--mdc-switch-disabled-selected-handle-color, var(--mat-sys-surface))}.mdc-switch--unselected:enabled .mdc-switch__handle::after{background:var(--mdc-switch-unselected-handle-color, var(--mat-sys-outline))}.mdc-switch--unselected:enabled:hover:not(:focus):not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-unselected-hover-handle-color, var(--mat-sys-on-surface-variant))}.mdc-switch--unselected:enabled:focus:not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-unselected-focus-handle-color, var(--mat-sys-on-surface-variant))}.mdc-switch--unselected:enabled:active .mdc-switch__handle::after{background:var(--mdc-switch-unselected-pressed-handle-color, var(--mat-sys-on-surface-variant))}.mdc-switch--unselected.mdc-switch--disabled .mdc-switch__handle::after{background:var(--mdc-switch-disabled-unselected-handle-color, var(--mat-sys-on-surface))}.mdc-switch__handle::before{background:var(--mdc-switch-handle-surface-color)}.mdc-switch__shadow{border-radius:inherit;bottom:0;left:0;position:absolute;right:0;top:0}.mdc-switch:enabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-handle-elevation-shadow)}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:hover:not(:focus):not(:active) .mdc-switch__shadow,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:focus:not(:active) .mdc-switch__shadow,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:active .mdc-switch__shadow,.mdc-switch.mdc-switch--disabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-disabled-handle-elevation-shadow)}.mdc-switch__ripple{left:50%;position:absolute;top:50%;transform:translate(-50%, -50%);z-index:-1;width:var(--mdc-switch-state-layer-size, 40px);height:var(--mdc-switch-state-layer-size, 40px)}.mdc-switch__ripple::after{content:"";opacity:0}.mdc-switch--disabled .mdc-switch__ripple::after{display:none}.mat-mdc-slide-toggle-disabled-interactive .mdc-switch__ripple::after{display:block}.mdc-switch:hover .mdc-switch__ripple::after{opacity:.04;transition:75ms opacity cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-slide-toggle.mat-mdc-slide-toggle-focused .mdc-switch .mdc-switch__ripple::after{opacity:.12}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:enabled:focus .mdc-switch__ripple::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:enabled:active .mdc-switch__ripple::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:enabled:hover:not(:focus) .mdc-switch__ripple::after,.mdc-switch--unselected:enabled:hover:not(:focus) .mdc-switch__ripple::after{background:var(--mdc-switch-unselected-hover-state-layer-color, var(--mat-sys-on-surface))}.mdc-switch--unselected:enabled:focus .mdc-switch__ripple::after{background:var(--mdc-switch-unselected-focus-state-layer-color, var(--mat-sys-on-surface))}.mdc-switch--unselected:enabled:active .mdc-switch__ripple::after{background:var(--mdc-switch-unselected-pressed-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mdc-switch-unselected-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity));transition:opacity 75ms linear}.mdc-switch--selected:enabled:hover:not(:focus) .mdc-switch__ripple::after{background:var(--mdc-switch-selected-hover-state-layer-color, var(--mat-sys-primary))}.mdc-switch--selected:enabled:focus .mdc-switch__ripple::after{background:var(--mdc-switch-selected-focus-state-layer-color, var(--mat-sys-primary))}.mdc-switch--selected:enabled:active .mdc-switch__ripple::after{background:var(--mdc-switch-selected-pressed-state-layer-color, var(--mat-sys-primary));opacity:var(--mdc-switch-selected-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity));transition:opacity 75ms linear}.mdc-switch__icons{position:relative;height:100%;width:100%;z-index:1;transform:translateZ(0)}.mdc-switch--disabled.mdc-switch--unselected .mdc-switch__icons{opacity:var(--mdc-switch-disabled-unselected-icon-opacity, 0.38)}.mdc-switch--disabled.mdc-switch--selected .mdc-switch__icons{opacity:var(--mdc-switch-disabled-selected-icon-opacity, 0.38)}.mdc-switch__icon{bottom:0;left:0;margin:auto;position:absolute;right:0;top:0;opacity:0;transition:opacity 30ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-switch--unselected .mdc-switch__icon{width:var(--mdc-switch-unselected-icon-size, 16px);height:var(--mdc-switch-unselected-icon-size, 16px);fill:var(--mdc-switch-unselected-icon-color, var(--mat-sys-surface-variant))}.mdc-switch--unselected.mdc-switch--disabled .mdc-switch__icon{fill:var(--mdc-switch-disabled-unselected-icon-color, var(--mat-sys-surface-variant))}.mdc-switch--selected .mdc-switch__icon{width:var(--mdc-switch-selected-icon-size, 16px);height:var(--mdc-switch-selected-icon-size, 16px);fill:var(--mdc-switch-selected-icon-color, var(--mat-sys-on-primary-container))}.mdc-switch--selected.mdc-switch--disabled .mdc-switch__icon{fill:var(--mdc-switch-disabled-selected-icon-color, var(--mat-sys-on-surface))}.mdc-switch--selected .mdc-switch__icon--on,.mdc-switch--unselected .mdc-switch__icon--off{opacity:1;transition:opacity 45ms 30ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-slide-toggle{-webkit-user-select:none;user-select:none;display:inline-block;-webkit-tap-highlight-color:rgba(0,0,0,0);outline:0}.mat-mdc-slide-toggle .mat-mdc-slide-toggle-ripple,.mat-mdc-slide-toggle .mdc-switch__ripple::after{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:50%;pointer-events:none}.mat-mdc-slide-toggle .mat-mdc-slide-toggle-ripple:not(:empty),.mat-mdc-slide-toggle .mdc-switch__ripple::after:not(:empty){transform:translateZ(0)}.mat-mdc-slide-toggle.mat-mdc-slide-toggle-focused .mat-focus-indicator::before{content:""}.mat-mdc-slide-toggle .mat-internal-form-field{color:var(--mat-switch-label-text-color, var(--mat-sys-on-surface));font-family:var(--mat-switch-label-text-font, var(--mat-sys-body-medium-font));line-height:var(--mat-switch-label-text-line-height, var(--mat-sys-body-medium-line-height));font-size:var(--mat-switch-label-text-size, var(--mat-sys-body-medium-size));letter-spacing:var(--mat-switch-label-text-tracking, var(--mat-sys-body-medium-tracking));font-weight:var(--mat-switch-label-text-weight, var(--mat-sys-body-medium-weight))}.mat-mdc-slide-toggle .mat-ripple-element{opacity:.12}.mat-mdc-slide-toggle .mat-focus-indicator::before{border-radius:50%}.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle-track,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__icon,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle::before,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle::after,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__track::before,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__track::after{transition:none}.mat-mdc-slide-toggle .mdc-switch:enabled+.mdc-label{cursor:pointer}.mat-mdc-slide-toggle .mdc-switch--disabled+label{color:var(--mdc-switch-disabled-label-text-color)}
`],encapsulation:2,changeDetection:0})}return c})();var Je=(()=>{class c{static \u0275fac=function(i){return new(i||c)};static \u0275mod=pe({type:c});static \u0275inj=re({imports:[Z,ae,ae]})}return c})();var pt=()=>[2023,2024,2025,2026],gt=()=>[1,2,3,4,5,6,7,8,9,10,11,12];function bt(c,t){if(c&1&&(r(0,"mat-option",8),d(1),n()),c&2){let e=t.$implicit;l("value",e),s(),f(" ",e," ")}}function _t(c,t){if(c&1&&(r(0,"mat-option",8),d(1),n()),c&2){let e=t.$implicit;l("value",e),s(),f(" ",e," ")}}function ft(c,t){if(c&1&&(r(0,"mat-option",8),d(1),n()),c&2){let e=t.$implicit;l("value",e.id),s(),z(" ",e.code," \u2014 ",e.name," ")}}function wt(c,t){c&1&&(r(0,"div",9),d(1," Computing variance... "),n())}function vt(c,t){if(c&1&&(r(0,"div")(1,"div",10)(2,"div"),d(3),P(4,"number"),n(),r(5,"div"),d(6),P(7,"number"),n(),r(8,"div"),d(9),P(10,"number"),n()()()),c&2){let e=g();s(3),f("Planned: ",L(4,7,e.result.planned,"1.2-2"),""),s(3),f("Actual: ",L(7,10,e.result.actual,"1.2-2"),""),s(2),T("positive",e.result.variance>=0)("negative",e.result.variance<0),s(),f(" Variance: ",L(10,13,e.result.variance,"1.2-2")," ")}}var ee=class c{constructor(t,e,i){this.budgetService=t;this.accountsService=e;this.branchContext=i}year=new Date().getFullYear();month=new Date().getMonth()+1;accountId;consolidated=!1;loading=!1;result=null;accounts=[];branchId=null;ngOnInit(){this.accountsService.list().subscribe(t=>this.accounts=t),this.branchContext.branch$.subscribe(t=>{this.branchId=t,this.load()})}load(){if(this.accountId)if(this.loading=!0,this.consolidated)this.budgetService.corporateVariance(this.year,this.month,this.accountId).subscribe(t=>{this.result=t,this.loading=!1});else{if(!this.branchId){this.loading=!1,this.result=null;return}this.budgetService.branchVariance(this.branchId,this.year,this.month,this.accountId).subscribe(t=>{this.result=t,this.loading=!1})}}static \u0275fac=function(e){return new(e||c)(u(E),u(H),u(B))};static \u0275cmp=b({type:c,selectors:[["app-budget-variance"]],decls:21,vars:11,consts:[[1,"variance-container"],[1,"controls"],["appearance","fill"],[3,"ngModelChange","selectionChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"ngModelChange","change","ngModel"],["class","loading",4,"ngIf"],[4,"ngIf"],[3,"value"],[1,"loading"],[1,"card"]],template:function(e,i){e&1&&(r(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"mat-label"),d(4,"Year"),n(),r(5,"mat-select",3),y("ngModelChange",function(o){return v(i.year,o)||(i.year=o),o}),p("selectionChange",function(){return i.load()}),m(6,bt,2,2,"mat-option",4),n()(),r(7,"mat-form-field",2)(8,"mat-label"),d(9,"Month"),n(),r(10,"mat-select",3),y("ngModelChange",function(o){return v(i.month,o)||(i.month=o),o}),p("selectionChange",function(){return i.load()}),m(11,_t,2,2,"mat-option",4),n()(),r(12,"mat-form-field",2)(13,"mat-label"),d(14,"Account"),n(),r(15,"mat-select",3),y("ngModelChange",function(o){return v(i.accountId,o)||(i.accountId=o),o}),p("selectionChange",function(){return i.load()}),m(16,ft,2,3,"mat-option",4),n()(),r(17,"mat-slide-toggle",5),y("ngModelChange",function(o){return v(i.consolidated,o)||(i.consolidated=o),o}),p("change",function(){return i.load()}),d(18," Consolidated "),n()(),m(19,wt,2,0,"div",6)(20,vt,11,16,"div",7),n()),e&2&&(s(5),w("ngModel",i.year),s(),l("ngForOf",ie(9,pt)),s(4),w("ngModel",i.month),s(),l("ngForOf",ie(10,gt)),s(4),w("ngModel",i.accountId),s(),l("ngForOf",i.accounts),s(),w("ngModel",i.consolidated),s(2),l("ngIf",i.loading),s(),l("ngIf",!i.loading&&i.result))},dependencies:[I,R,Ee,Be,G,N,q,x,X,Y,$,U,j,Je,Z],encapsulation:2})};var wi=[{path:"",component:K},{path:"variance",component:ee}];export{wi as BUDGETING_ROUTES};
