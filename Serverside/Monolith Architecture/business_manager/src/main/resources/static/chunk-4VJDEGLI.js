import{a as z}from"./chunk-SN76SVR7.js";import"./chunk-MS4AQ6UA.js";import{a as T,b as A}from"./chunk-H37LQHOQ.js";import{d as b}from"./chunk-DF6WYVPK.js";import"./chunk-MJONFXFY.js";import{a as k}from"./chunk-BIVTK5YB.js";import{c as R,d as D}from"./chunk-ZFWGKVXC.js";import"./chunk-3RK6DDJD.js";import{a as N}from"./chunk-CONPK5ZF.js";import{b as E,h as I}from"./chunk-3ZV2DC5Q.js";import"./chunk-SGYCFQGT.js";import{d as M,f as c,h as x,i as _,p as y,s as w,v as F,x as P}from"./chunk-Z2GGFO6C.js";import"./chunk-75T6YVBZ.js";import{g as O,h as S}from"./chunk-TENNXE3V.js";import"./chunk-2X53NFZU.js";import{d as C}from"./chunk-VUFC7WNX.js";import"./chunk-CDHEWSLI.js";import"./chunk-5DTMLZHP.js";import{Ib as o,Jb as t,Kb as f,Qb as d,Tc as h,ac as i,bb as s,bd as v,cc as g,da as l,nb as p,sb as u,zb as m}from"./chunk-3DYKM6ZU.js";import"./chunk-FJYW2LMB.js";function j(r,n){if(r&1&&(o(0,"mat-option",17),i(1),t()),r&2){let e=n.$implicit;m("value",e),s(),g(" ",e," ")}}var B=class r{fb=l(F);reset=l(z);router=l(C);snack=l(k);loading=!1;channels=[];form=this.fb.nonNullable.group({identifier:["",c.required],channel:["IDENTITY",c.required]});ngOnInit(){this.reset.getOptions().subscribe(n=>{this.channels=n.channels,this.channels.includes(this.form.controls.channel.value)||this.form.controls.channel.setValue(this.channels[0])})}submit(){if(this.form.invalid)return;let{identifier:n,channel:e}=this.form.value;this.loading=!0,this.reset.initiate({identifier:n,channel:e}).subscribe({complete:()=>{},error:()=>{}}),this.snack.open(e==="EMAIL"?"A verification code has been sent to your email.":e==="SMS"?"A verification code has been sent to your phone.":"Proceed to identity verification.","Close",{duration:4e3}),this.loading=!1,this.router.navigate(["/auth/reset-password"],{state:{identifier:n,channel:e}})}cancel(){this.router.navigate(["/login"],{replaceUrl:!0,queryParams:{reason:"idle"}})}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=p({type:r,selectors:[["app-forgot-password"]],decls:28,vars:3,consts:[[1,"auth-root"],[1,"auth-card",3,"formGroup"],[1,"dialog-header"],[1,"dialog-title"],[1,"dialog-subtitle"],[1,"form-section"],[1,"section-label"],[1,"form-grid"],["appearance","fill"],["matInput","","formControlName","identifier","autocomplete","username","placeholder","e.g. ian dancan"],["formControlName","channel"],[3,"value",4,"ngFor","ngForOf"],[1,"dialog-footer"],[1,"footer-hint"],[1,"footer-actions"],["mat-stroked-button","",3,"click"],["mat-flat-button","","color","primary",3,"click","disabled"],[3,"value"]],template:function(e,a){e&1&&(o(0,"div",0)(1,"div",1)(2,"header",2)(3,"div",3),i(4,"Forgot password"),t(),o(5,"div",4),i(6," Choose how you would like to recover access "),t()(),o(7,"section",5)(8,"div",6),i(9,"Account"),t(),o(10,"div",7)(11,"mat-form-field",8)(12,"mat-label"),i(13,"Username"),t(),f(14,"input",9),t(),o(15,"mat-form-field",8)(16,"mat-label"),i(17,"Reset method"),t(),o(18,"mat-select",10),u(19,j,2,2,"mat-option",11),t()()()(),o(20,"footer",12)(21,"div",13),i(22," Reset instructions are time-limited and audit-logged "),t(),o(23,"div",14)(24,"button",15),d("click",function(){return a.cancel()}),i(25,"Cancel"),t(),o(26,"button",16),d("click",function(){return a.submit()}),i(27," Continue "),t()()()()()),e&2&&(s(),m("formGroup",a.form),s(18),m("ngForOf",a.channels),s(7),m("disabled",a.loading))},dependencies:[v,h,P,M,x,_,y,w,N,I,E,D,R,A,T,b,S,O],styles:[".auth-root[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background:var(--app-bg);padding:24px}.auth-card[_ngcontent-%COMP%]{width:100%;max-width:600px;background:var(--surface);border:1px solid var(--border);border-radius:12px;padding:32px;box-shadow:0 12px 32px #00000014}.dialog-header[_ngcontent-%COMP%]{margin-bottom:24px}.dialog-title[_ngcontent-%COMP%]{font-size:1.4rem;font-weight:600}.dialog-subtitle[_ngcontent-%COMP%]{font-size:.9rem;color:var(--text-secondary)}.form-section[_ngcontent-%COMP%]{margin-top:12px}.section-label[_ngcontent-%COMP%]{font-size:.7rem;text-transform:uppercase;color:var(--text-secondary);margin-bottom:12px}.form-grid[_ngcontent-%COMP%]{display:grid;gap:16px}.dialog-footer[_ngcontent-%COMP%]{margin-top:32px;display:flex;justify-content:space-between;align-items:center}.footer-hint[_ngcontent-%COMP%]{font-size:.75rem;color:var(--text-secondary)}"]})};export{B as ForgotPasswordComponent};
