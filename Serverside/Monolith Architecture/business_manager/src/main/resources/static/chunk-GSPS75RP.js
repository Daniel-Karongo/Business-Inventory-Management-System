import{b as B,h as V}from"./chunk-5GYNI7WA.js";import{a as z}from"./chunk-22FAI265.js";import{a as j}from"./chunk-7QUTMXBD.js";import{a as T,b as w}from"./chunk-GQKP7E5B.js";import{a as N,b as $}from"./chunk-4DCSEN5G.js";import"./chunk-3ZV2DC5Q.js";import"./chunk-SGYCFQGT.js";import"./chunk-Z2GGFO6C.js";import"./chunk-75T6YVBZ.js";import{g as F,h as R}from"./chunk-TENNXE3V.js";import"./chunk-2X53NFZU.js";import{b as k,d as D}from"./chunk-VUFC7WNX.js";import"./chunk-CDHEWSLI.js";import"./chunk-5DTMLZHP.js";import{$b as u,Ib as n,Jb as i,Kb as C,Ob as S,Qb as x,Rb as p,Sc as I,T as b,Tc as O,Uc as E,ac as r,bb as a,bc as y,bd as P,cc as m,f as h,gb as g,ma as _,na as v,nb as M,sb as d,tc as f,zb as c}from"./chunk-3DYKM6ZU.js";import"./chunk-FJYW2LMB.js";function U(e,o){if(e&1&&(n(0,"h2"),r(1),i()),e&2){let t=p();a(),m(" ",t.category.name," ")}}function q(e,o){e&1&&C(0,"h2",9)}function G(e,o){e&1&&(n(0,"div",10),C(1,"mat-spinner",11),i())}function H(e,o){if(e&1&&(n(0,"div",12),r(1),i()),e&2){let t=p();a(),m(" ",t.error," ")}}function J(e,o){if(e&1&&(n(0,"mat-chip",22),r(1),i()),e&2){let t=o.$implicit;a(),m(" ",t.name," ")}}function K(e,o){if(e&1&&(n(0,"div",20),d(1,J,2,1,"mat-chip",21),i()),e&2){let t=p(2);a(),c("ngForOf",t.category.suppliers)}}function L(e,o){e&1&&(n(0,"span"),r(1,"\u2014"),i())}function Q(e,o){if(e&1&&(n(0,"li"),r(1),i()),e&2){let t=o.$implicit;a(),m(" ",t.name," ")}}function W(e,o){if(e&1&&(n(0,"ul"),d(1,Q,2,1,"li",23),i()),e&2){let t=p(2);a(),c("ngForOf",t.category.subcategories)}}function X(e,o){e&1&&(n(0,"span"),r(1,"\u2014"),i())}function Y(e,o){if(e&1){let t=S();n(0,"div",13)(1,"div",14)(2,"label"),r(3,"Description"),i(),n(4,"p"),r(5),i()(),n(6,"div",14)(7,"label"),r(8,"Status"),i(),n(9,"span",15),r(10),i()(),n(11,"div",14)(12,"label"),r(13,"Parent"),i(),n(14,"p"),r(15),i()(),n(16,"div",14)(17,"label"),r(18,"Suppliers"),i(),d(19,K,2,1,"div",16)(20,L,2,0,"ng-template",null,1,f),i(),n(22,"div",14)(23,"label"),r(24,"Subcategories"),i(),d(25,W,2,1,"ul",4)(26,X,2,0,"ng-template",null,2,f),i(),n(28,"div",17)(29,"button",18),x("click",function(){_(t);let l=p();return v(l.edit())}),r(30," Edit "),i(),n(31,"button",19),x("click",function(){_(t);let l=p();return v(l.back())}),r(32," Back "),i()()()}if(e&2){let t=u(21),s=u(27),l=p();a(5),y(l.category.description||"\u2014"),a(4),c("ngClass",l.category.deleted?"status-disabled":"status-active"),a(),m(" ",l.category.deleted?"Disabled":"Active"," "),a(5),y(l.category.parentName||"\u2014"),a(4),c("ngIf",l.hasSuppliers)("ngIfElse",t),a(6),c("ngIf",l.hasSubcategories)("ngIfElse",s)}}var A=class e{constructor(o,t,s){this.route=o;this.router=t;this.service=s}destroy$=new h;category=null;loading=!0;error=null;ngOnInit(){let o=Number(this.route.snapshot.paramMap.get("id"));if(!o){this.error="Invalid category ID",this.loading=!1;return}this.service.getById(o,"tree",!1).pipe(b(this.destroy$)).subscribe({next:t=>{this.category=t,this.loading=!1},error:()=>{this.error="Failed to load category.",this.loading=!1}})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}get hasSuppliers(){return!!this.category?.suppliers?.length}get hasSubcategories(){return!!this.category?.subcategories?.length}edit(){this.category&&this.router.navigate(["edit"],{relativeTo:this.route})}back(){this.router.navigate(["/categories"])}static \u0275fac=function(t){return new(t||e)(g(k),g(D),g(z))};static \u0275cmp=M({type:e,selectors:[["app-category-details"]],decls:9,vars:5,consts:[["loadingTitle",""],["noSuppliers",""],["noSubs",""],["page-header",""],[4,"ngIf","ngIfElse"],["page-content",""],["class","loading-container",4,"ngIf"],["class","error-state",4,"ngIf"],["class","details-grid",4,"ngIf"],[1,"skeleton","w-40","lg"],[1,"loading-container"],["diameter","40"],[1,"error-state"],[1,"details-grid"],[1,"field"],[1,"status-badge",3,"ngClass"],["class","chip-container",4,"ngIf","ngIfElse"],[1,"actions"],["mat-flat-button","","color","primary","matTooltip","Edit this category",3,"click"],["mat-stroked-button","","matTooltip","Back to category list",3,"click"],[1,"chip-container"],["class","supplier-chip",4,"ngFor","ngForOf"],[1,"supplier-chip"],[4,"ngFor","ngForOf"]],template:function(t,s){if(t&1&&(n(0,"app-page-shell")(1,"div",3),d(2,U,2,1,"h2",4)(3,q,1,0,"ng-template",null,0,f),i(),n(5,"div",5),d(6,G,2,0,"div",6)(7,H,2,1,"div",7)(8,Y,33,8,"div",8),i()()),t&2){let l=u(4);a(2),c("ngIf",s.category)("ngIfElse",l),a(4),c("ngIf",s.loading),a(),c("ngIf",s.error&&!s.loading),a(),c("ngIf",!s.loading&&s.category)}},dependencies:[P,I,O,E,j,R,F,V,B,$,N,w,T],styles:[".details-grid[_ngcontent-%COMP%]{display:grid;gap:1.75rem;max-width:900px}@media (min-width: 768px){.details-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.actions[_ngcontent-%COMP%]{grid-column:span 2}}.field[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.4rem}.field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.8rem;font-weight:600;color:var(--text-secondary)}.field[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .field[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0;font-size:.95rem}.status-badge[_ngcontent-%COMP%]{display:inline-block;padding:3px 10px;font-size:.75rem;border-radius:999px;font-weight:500;width:max-content}.status-active[_ngcontent-%COMP%]{background:var(--status-active-bg);color:var(--status-active-text)}.status-disabled[_ngcontent-%COMP%]{background:var(--status-disabled-bg);color:var(--status-disabled-text)}.chip-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px}.supplier-chip[_ngcontent-%COMP%]{font-size:.8rem}.actions[_ngcontent-%COMP%]{display:flex;gap:1rem;flex-wrap:wrap;margin-top:1rem}.loading-container[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:3rem 0}.error-state[_ngcontent-%COMP%]{padding:1.5rem;border-radius:8px;background:#ef444414;color:#dc2626;font-weight:500}.skeleton[_ngcontent-%COMP%]{height:18px;border-radius:6px;background:linear-gradient(90deg,var(--surface-hover) 25%,rgba(255,255,255,.18) 37%,var(--surface-hover) 63%);background-size:400% 100%;animation:_ngcontent-%COMP%_shimmer 1.4s infinite linear}.skeleton.w-40[_ngcontent-%COMP%]{width:40%}.skeleton.lg[_ngcontent-%COMP%]{height:28px}@keyframes _ngcontent-%COMP%_shimmer{0%{background-position:100% 0}to{background-position:-100% 0}}"]})};export{A as CategoryDetailsComponent};
