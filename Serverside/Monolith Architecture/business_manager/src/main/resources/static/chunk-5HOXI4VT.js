import"./chunk-MS4AQ6UA.js";import{a as Y,b as q}from"./chunk-H37LQHOQ.js";import{d as k}from"./chunk-DF6WYVPK.js";import"./chunk-MJONFXFY.js";import{a as H,b as L}from"./chunk-BIVTK5YB.js";import{c as V,d as K}from"./chunk-ZFWGKVXC.js";import"./chunk-3RK6DDJD.js";import{a as U}from"./chunk-CONPK5ZF.js";import{b as x,h as R}from"./chunk-3ZV2DC5Q.js";import"./chunk-SGYCFQGT.js";import{d as W,h as F,l as T,n as A,w as N}from"./chunk-Z2GGFO6C.js";import"./chunk-75T6YVBZ.js";import{g as D,h as j}from"./chunk-TENNXE3V.js";import"./chunk-2X53NFZU.js";import{a as O}from"./chunk-5DTMLZHP.js";import{Ib as n,Jb as a,Qb as _,Tc as I,Yc as E,Z as S,ac as r,bb as l,bd as w,ca as g,fc as b,gb as y,gc as s,hc as u,ic as d,jd as B,nb as M,pc as v,rc as P,sb as h,zb as C}from"./chunk-3DYKM6ZU.js";import"./chunk-FJYW2LMB.js";var c=class p{constructor(o){this.http=o}base=`${O.apiUrl}/finance`;paySupplier(o,t,i,m){let e={supplierId:o,amount:t,method:i};return m&&(e.reference=m),this.http.post(`${this.base}/supplier-payments`,null,{params:e})}listSupplierPayments(o=0,t=20){return this.http.get(`${this.base}/supplier-payments`,{params:{page:o,size:t}})}static \u0275fac=function(t){return new(t||p)(g(B))};static \u0275prov=S({token:p,factory:p.\u0275fac,providedIn:"root"})};function J(p,o){if(p&1&&(n(0,"div",13),r(1),v(2,"date"),a()),p&2){let t=o.$implicit;l(),b(" ",t.supplierId," | ",t.amount," | ",t.method," | ",P(2,4,t.paidAt,"short")," ")}}var f=class p{constructor(o,t){this.paymentsService=o;this.snackbar=t}supplierId="";amount;method="CASH";reference="";payments=[];ngOnInit(){this.load()}load(){this.paymentsService.listSupplierPayments().subscribe(o=>this.payments=o.content)}pay(){!this.supplierId||!this.amount||this.paymentsService.paySupplier(this.supplierId,this.amount,this.method,this.reference).subscribe({next:()=>{this.snackbar.open("Supplier paid successfully","Close",{duration:2e3}),this.load()},error:()=>this.snackbar.open("Payment failed","Close",{duration:3e3})})}static \u0275fac=function(t){return new(t||p)(y(c),y(H))};static \u0275cmp=M({type:p,selectors:[["app-supplier-payments"]],decls:30,vars:5,consts:[[1,"page-container","p-4"],[1,"text-xl","font-semibold","mb-4"],[1,"payment-form"],["appearance","fill"],["matInput","",3,"ngModelChange","ngModel"],["matInput","","type","number",3,"ngModelChange","ngModel"],[3,"ngModelChange","ngModel"],["value","CASH"],["value","BANK"],["value","MPESA"],["mat-flat-button","","color","primary",3,"click"],[1,"mt-6"],["class","payment-row",4,"ngFor","ngForOf"],[1,"payment-row"]],template:function(t,i){t&1&&(n(0,"div",0)(1,"h2",1),r(2," Supplier Payments "),a(),n(3,"div",2)(4,"mat-form-field",3)(5,"mat-label"),r(6,"Supplier ID"),a(),n(7,"input",4),d("ngModelChange",function(e){return u(i.supplierId,e)||(i.supplierId=e),e}),a()(),n(8,"mat-form-field",3)(9,"mat-label"),r(10,"Amount"),a(),n(11,"input",5),d("ngModelChange",function(e){return u(i.amount,e)||(i.amount=e),e}),a()(),n(12,"mat-form-field",3)(13,"mat-label"),r(14,"Method"),a(),n(15,"mat-select",6),d("ngModelChange",function(e){return u(i.method,e)||(i.method=e),e}),n(16,"mat-option",7),r(17,"Cash"),a(),n(18,"mat-option",8),r(19,"Bank"),a(),n(20,"mat-option",9),r(21,"Mpesa"),a()()(),n(22,"mat-form-field",3)(23,"mat-label"),r(24,"Reference"),a(),n(25,"input",4),d("ngModelChange",function(e){return u(i.reference,e)||(i.reference=e),e}),a()(),n(26,"button",10),_("click",function(){return i.pay()}),r(27," Pay Supplier "),a()(),n(28,"div",11),h(29,J,3,7,"div",12),a()()),t&2&&(l(7),s("ngModel",i.supplierId),l(4),s("ngModel",i.amount),l(4),s("ngModel",i.method),l(10),s("ngModel",i.reference),l(4),C("ngForOf",i.payments))},dependencies:[w,I,E,N,W,A,F,T,U,R,x,q,Y,k,K,V,j,D,L],encapsulation:2})};var Se=[{path:"",redirectTo:"supplier",pathMatch:"full"},{path:"supplier",component:f}];export{Se as PAYMENTS_ROUTES};
